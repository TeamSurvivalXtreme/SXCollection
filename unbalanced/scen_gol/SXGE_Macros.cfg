#textdomain wesnoth-SurvivalXtreme

# wmllint: local spellings Xtreme Firststrike Zerker Nightstalk Backstab
# wmllint: local spellings Sceptre Cantar FireArmor Dragonbone Dwarvish Urgh

#define ABILITY_DAUNTLESS
    [resistance]
        id=dauntless
        name= _ "dauntless"
        description= _ "While attacking, this unit's resistances are doubled, up to a maximum of 50. Weaknesses are not affected."
        name_inactive= _ "dauntless"
        description_inactive= _ "While attacking, this unit's resistances are doubled, up to a maximum of 50. Weaknesses are not affected."
        multiply=2
        max_value=50
        apply_to=blade,pierce,impact,fire,cold,arcane
        [filter_base_value]
            greater_than=0
        [/filter_base_value]
        active_on=offense
    [/resistance]
#enddef

#define ABILITY_PROTECTION_LEVEL_4
    [resistance]
        id=protection
        add=20
        max_value=50
        apply_to=blade,pierce,impact,fire,cold,arcane
        name= _ "protection"
        description= _ "Adjacent units of lower level from this side receive a +20% bonus to all resistances (up to a maximum of 50%)."
        affect_self=no
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
            [filter]
                level=0
                [or]
                    level=1
                [/or]
                [or]
                    level=2
                [/or]
                [or]
                    level=3
                [/or]
            [/filter]
        [/affect_adjacent]
    [/resistance]
#enddef

#define WEAPON_SPECIAL_DREAD
    [damage]
        id=dread
        name= _ "dread"
        name_inactive= _ "dread"
        description= _ "When this attack is used offensively, this unit takes one third less damage in retaliation." 
        description_inactive= _ "When this attack is used offensively, this unit takes one third less damage in retaliation."
        active_on=offense
        apply_to=opponent
        multiply=0.66
    [/damage]
#enddef

#-------------------------------------------------------------
# This macro places a shop in which players can enhance their
# stats, buy new weapons and give gold to other players.
# The sandwich has to look like this:
# SURVIVALX_BEFORE_SHOPS
# SURVIVALX_SHOP X Y
# SURVIVALX_SHOP_EVENT
# Usage: X Y are the coordinates where the shop should appear.
#-------------------------------------------------------------

#---------------------------------------------------------------------------
# An unreachable coordinate to make sure the list doesn't start with a comma
#---------------------------------------------------------------------------
#define SURVIVALX_BEFORE_SHOPS
    {VARIABLE shopxs 999}
    {VARIABLE shopys 999}
#enddef

#define SURVIVALX_SHOP X Y
    [label]
        x={X}
        y={Y}
        text=_ "Shop"
    [/label]
    [item]
        x={X}
        y={Y}
        image=scenery/signpost.png
    [/item]

    [set_variable]
        name=shopxs
        format=$shopxs|,{X}
    [/set_variable]
    [set_variable]
        name=shopys
        format=$shopys|,{Y}
    [/set_variable]
#enddef

#define SURVIVALX_SHOP_EVENT
    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1,2,3,4,5
            x=$shopxs
            y=$shopys
        [/filter]
        {VARIABLE finished no}
        [redraw]
        [/redraw]
        [while]
            [variable]
                name=finished
                equals=no
            [/variable]
            [do]
                [store_gold]
                    side=$side_number
                    variable=gold
                [/store_gold]

                [message]
                    speaker=narrator
                    message= _ "<225,225,25>Gold: $gold|"
                    [option]
                        message= _ "Done"
                        [command]
                            {VARIABLE finished yes}
                        [/command]
                    [/option]

                    [option]
                        message= _ "20 gold: Restore HP"
                        [command]
                            [if]
                                [variable]
                                    name=gold
                                    greater_than_equal_to=20
                                [/variable]
                                [then]
                                    [gold]
                                        amount=-20
                                        side=$side_number
                                    [/gold]
                                    [object]
                                        silent=yes
                                        [effect]
                                            apply_to=hitpoints
                                            increase_total=0
                                            heal_full=yes
                                        [/effect]
                                        [effect]
                                            apply_to=status
                                            remove=poisoned
                                        [/effect]
                                        [effect]
                                            apply_to=status
                                            remove=slowed
                                        [/effect]
                                    [/object]
                                [/then]
                            [/if]
                        [/command]
                    [/option]

                    [option]
                        message= _ "Enhancements"
                        [command]
                            {VARIABLE finished_sub no}
                            [while]
                                [variable]
                                    name=finished_sub
                                    equals=no
                                [/variable]
                                [do]
                                    [store_gold]
                                        side=$side_number
                                        variable=gold
                                    [/store_gold]
                                    {VARIABLE_OP moveleft format $move_lefty_$side_number}

                                    [message]
                                        speaker=narrator
                                        # wmllint: display on
                                        message= _ "<225,225,25>Gold: $gold|
@Movement left: $moveleft|"
                                        # wmllint: display off

                                        [option]
                                            message= _ "Done"
                                            [command]
                                                {VARIABLE finished_sub yes}
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "20 gold: +1 Melee Damage"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=20
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-20
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                increase_damage=1
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "20 gold: +1 Ranged Damage"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=20
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-20
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                increase_damage=1
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "30 gold: +1 Both Damage"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=30
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-30
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                increase_damage=1
                                                            [/effect]
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                increase_damage=1
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "75 gold: +1 Melee Strikes"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=75
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-75
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                increase_attacks=1
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "75 gold: +1 Ranged Strikes"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=75
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-75
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                increase_attacks=1
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "120 gold: +1 Both Strikes"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=120
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-120
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                increase_attacks=1
                                                            [/effect]
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                increase_attacks=1
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "10 gold: +5 Max. HP"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=10
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-10
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            [effect]
                                                                apply_to=hitpoints
                                                                increase_total=5
                                                                violate_maximum=yes
                                                            [/effect]
                                                            [effect]
                                                                apply_to=hitpoints
                                                                increase=5
                                                                violate_maximum=yes
                                                            [/effect]
                                                            silent=yes
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100 gold: +50 Max. HP"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            [effect]
                                                                apply_to=hitpoints
                                                                increase_total=50
                                                                violate_maximum=yes
                                                            [/effect]
                                                            [effect]
                                                                apply_to=hitpoints
                                                                increase=50
                                                                violate_maximum=yes
                                                            [/effect]
                                                            silent=yes
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "30 gold: +1 Movement Points"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=30
                                                    [/variable]
                                                    [variable]
                                                        name=moveleft
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-30
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP move_lefty_$side_number add -1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement
                                                                increase=1
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]
                                        image=wesnoth-icon.png
                                    [/message]
                                    [redraw]
                                    [/redraw]
                                [/do]
                            [/while]
                        [/command]
                    [/option]

                    [option]
                        message= _ "Weapon Store"
                        [command]
                            {VARIABLE finished_sub no}
                            [while]
                                [variable]
                                    name=finished_sub
                                    equals=no
                                [/variable]
                                [do]
                                    [store_gold]
                                        side=$side_number
                                        variable=gold
                                    [/store_gold]
                                    [message]
                                        speaker=narrator
                                        message= _ "<225,225,25>Gold: $gold|"

                                        [option]
                                            message= _ "Done"
                                            [command]
                                                {VARIABLE finished_sub yes}
                                            [/command]
                                        [/option]
                                        [option]
                                            message= _ "35 gold - Mace: 15-2 Melee Impact"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=34
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Mace"
                                                                icon=attacks/mace.png
                                                                type=impact
                                                                range=melee
                                                                damage=15
                                                                number=2
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Mace"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:MISS}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Mace"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound=mace.wav
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-35
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "35 gold - Sword: 7-4 Melee Blade"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=34
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Sword"
                                                                icon=attacks/sword-human.png
                                                                type=blade
                                                                range=melee
                                                                damage=7
                                                                number=4
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Sword"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:MISS}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Sword"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:SWORD_SWISH}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-35
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "45 gold - Torch: 8-3 Melee Fire"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=44
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Torch"
                                                                icon=attacks/torch.png
                                                                type=fire
                                                                range=melee
                                                                damage=8
                                                                number=3
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Torch"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound=torch-miss.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Torch"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound=torch.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-45
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "50 gold - Spear: 9-3 Melee Pierce Firststrike"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=49
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Spear"
                                                                icon=attacks/spear.png
                                                                type=pierce
                                                                range=melee
                                                                damage=9
                                                                number=3
                                                                [specials]
                                                                    {WEAPON_SPECIAL_FIRSTSTRIKE}
                                                                [/specials]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Spear"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound=spear-miss.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Spear"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound=spear.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-50
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "65 gold - Yeti Claw: 6-1 Melee Cold"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=64
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Yeti Claw"
                                                                icon=attacks/sword-human.png
                                                                type=cold
                                                                range=melee
                                                                damage=6
                                                                number=1
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Yeti Claw"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:MISS}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Yeti Claw"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:SWORD_SWISH}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-65
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "90 gold - Heavy Staff: 7-2 Melee Impact Slows"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=89
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Heavy Staff"
                                                                icon=attacks/staff-elven.png
                                                                type=impact
                                                                range=melee
                                                                [specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/specials]
                                                                damage=7
                                                                number=2
                                                                defense_weight=5
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Heavy Staff"
                                                                    [/filter_attack]
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-100
                                                                    [/frame]
                                                                    [if]
                                                                        hits=yes
                                                                        [frame]
                                                                            begin=-100
                                                                            end=0
                                                                            sound=staff.wav
                                                                        [/frame]
                                                                        [frame]
                                                                            begin=0
                                                                            end=25
                                                                            sound=entangle.wav
                                                                        [/frame]
                                                                    [/if]
                                                                    [else]
                                                                        hits=no
                                                                        [frame]
                                                                            begin=-100
                                                                            end=25
                                                                            sound={SOUND_LIST:MISS}
                                                                        [/frame]
                                                                    [/else]
                                                                    [frame]
                                                                        begin=25
                                                                        end=100
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=150
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-90
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "90 gold - Lance: 12-2 Melee Pierce Charge"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=89
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Lance"
                                                                icon=attacks/lance.png
                                                                type=pierce
                                                                range=melee
                                                                [specials]
                                                                    {WEAPON_SPECIAL_CHARGE}
                                                                [/specials]
                                                                damage=12
                                                                number=2
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Lance"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-250
                                                                        end=-200
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound=spear.wav
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=150
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Lance"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-250
                                                                        end=-225
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-225
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:MISS}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=175
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=175
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-90
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "120 gold - Staff: 8-2 Melee Impact Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=119
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Staff"
                                                                icon=attacks/staff-elven.png
                                                                type=impact
                                                                range=melee
                                                                [specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/specials]
                                                                damage=8
                                                                number=2
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Staff"
                                                                    [/filter_attack]
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-100
                                                                    [/frame]
                                                                    [if]
                                                                        hits=yes
                                                                        [frame]
                                                                            begin=-100
                                                                            end=25
                                                                            sound=staff.wav
                                                                        [/frame]
                                                                    [/if]
                                                                    [else]
                                                                        hits=no
                                                                        [frame]
                                                                            begin=-100
                                                                            end=25
                                                                            sound={SOUND_LIST:MISS}
                                                                        [/frame]
                                                                    [/else]
                                                                    [frame]
                                                                        begin=25

                                                                        end=100
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=150
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-120
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "130 gold - Flaming Sword: 6-3 Melee Fire Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=129
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Flaming Sword"
                                                                icon=attacks/sword-flaming.png
                                                                type=fire
                                                                [specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/specials]
                                                                range=melee
                                                                damage=6
                                                                number=3
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Flaming Sword"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:MISS},torch-miss.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Flaming Sword"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:SWORD_SWISH},torch.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-130
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]
                                        [option]
                                            message= _ "130 gold - Enchanted Sword: 6-3 Melee Arcane Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=129
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Enchanted Sword"
                                                                icon=attacks/sword-holy.png
                                                                type=arcane
                                                                range=melee
                                                                [specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/specials]
                                                                damage=6
                                                                number=3
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Enchanted Sword"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:MISS},{SOUND_LIST:HOLY_MISS}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Enchanted Sword"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=70
                                                                        sound={SOUND_LIST:SWORD_SWISH},{SOUND_LIST:HOLY}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-130
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "150 gold - Force Blade: 4-2 Melee Force"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=149
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Force Blade"
                                                                icon=attacks/sword-human.png
                                                                type=force
                                                                range=melee
                                                                damage=4
                                                                number=2
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Force Blade"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:MISS}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Force Blade"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:SWORD_SWISH}
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-150
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200 gold - Zerker Sword: 2-2 Melee Blade Berserk"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=199
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Zerker Sword"
                                                                icon=attacks/frenzy.png
                                                                type=blade
                                                                [specials]
                                                                    {WEAPON_SPECIAL_BERSERK}
                                                                [/specials]
                                                                range=melee
                                                                damage=2
                                                                number=2
                                                                defense_weight=0
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Zerker Sword"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:MISS},axe.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Zerker Sword"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound={SOUND_LIST:SWORD_SWISH},axe.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-200
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "35 gold - Bow: 7-3 Ranged Pierce"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=34
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Bow"
                                                                icon=attacks/bow.png
                                                                type=pierce
                                                                range=ranged
                                                                damage=7
                                                                number=3
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Bow"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/missile-n.png"
                                                                        image_diagonal="projectiles/missile-ne.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-375
                                                                        end=-300
                                                                        sound=bow-miss.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-300
                                                                        end=-225
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-225
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=-75
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-75
                                                                        end=-20
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-20
                                                                        end=20
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Bow"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/missile-n.png"
                                                                        image_diagonal="projectiles/missile-ne.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-375
                                                                        end=-300
                                                                        sound=bow.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-300
                                                                        end=-225
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-225
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=-75
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-75
                                                                        end=-20
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-20
                                                                        end=20
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-35
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "40 gold - Sling: 12-2 Ranged Impact"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=39
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Sling"
                                                                icon=attacks/sling.png
                                                                type=impact
                                                                range=ranged
                                                                damage=12
                                                                number=2
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Sling"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/stone.png"
                                                                        image_diagonal="projectiles/stone.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-400
                                                                        end=-100
                                                                        sound=sling-miss.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-100
                                                                        end=50
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Sling"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/stone.png"
                                                                        image_diagonal="projectiles/stone.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-400
                                                                        end=-100
                                                                        sound=sling.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-100
                                                                        end=50
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-40
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "55 gold - Throwing Knives: 5-3 Ranged Blade Poison"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=54
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Throwing Knives"
                                                                icon=attacks/dagger-thrown-poison-human.png
                                                                type=blade
                                                                range=ranged
                                                                damage=5
                                                                number=3
                                                                [specials]
                                                                    {WEAPON_SPECIAL_POISON}
                                                                [/specials]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Throwing Knives"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/dagger-n.png"
                                                                        image_diagonal="projectiles/dagger-ne.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-100
                                                                        sound=throwing-knife-miss.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-100
                                                                        end=50
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Throwing Knives"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/dagger-n.png"
                                                                        image_diagonal="projectiles/dagger-ne.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-200

                                                                        end=-100
                                                                        sound=throwing-knife.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-100
                                                                        end=50
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-55
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "75 gold - Net: 3-3 Ranged Impact Slows"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=74
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Net"
                                                                icon=attacks/net.png
                                                                type=impact
                                                                range=ranged
                                                                [specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/specials]
                                                                damage=3
                                                                number=3
                                                                defense_weight=5
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Net"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [missile_frame]
                                                                        begin=-200
                                                                        end=0
                                                                        image="projectiles/web.png"
                                                                        image_diagonal="projectiles/web.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-100
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-100
                                                                        end=100
                                                                        sound={SOUND_LIST:MISS}
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Net"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [missile_frame]
                                                                        begin=-200
                                                                        end=0
                                                                        image="projectiles/web.png"
                                                                        image_diagonal="projectiles/web.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-100
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-100
                                                                        end=100
                                                                        sound=net.wav
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-75
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "90 gold - Crossbow: 8-3 Ranged Pierce Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=94
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Crossbow"
                                                                icon=attacks/crossbow-human.png
                                                                type=pierce
                                                                [specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/specials]
                                                                range=ranged
                                                                damage=8
                                                                number=3
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Crossbow"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/missile-n.png"
                                                                        image_diagonal="projectiles/missile-ne.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-350
                                                                        end=50
                                                                        sound=crossbow-miss.ogg
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Crossbow"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/missile-n.png"
                                                                        image_diagonal="projectiles/missile-ne.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-350
                                                                        end=50
                                                                        sound=crossbow.ogg
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-90
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "35 gold - Torch: 8-1 Ranged Fire"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=34
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Torch"
                                                                icon=attacks/torch.png
                                                                type=fire
                                                                range=ranged
                                                                damage=8
                                                                number=1
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Torch"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound=torch-miss.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Torch"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [frame]
                                                                        begin=-200
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=100
                                                                        sound=torch.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=100
                                                                        end=200
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-35
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "130 gold - Fireball: 6-3 Ranged Fire Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=129
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Fireball"
                                                                icon=attacks/fireball.png
                                                                type=fire
                                                                range=ranged
                                                                [specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/specials]
                                                                damage=6
                                                                number=3
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Fireball"
                                                                    [/filter_attack]
                                                                    {MISSILE_FRAME_FIREBALL}

                                                                    start_time=-575
                                                                    [frame]
                                                                        duration=575
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-130
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "130 gold - Ice Wave: 9-2 Ranged Cold Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=129
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Ice Wave"
                                                                icon=attacks/dark-missile.png
                                                                type=cold
                                                                range=ranged
                                                                [specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/specials]
                                                                damage=9
                                                                number=2
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Ice Wave"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [missile_frame]
                                                                        begin=-200
                                                                        end=0
                                                                        image="projectiles/darkmissile-n.png"
                                                                        image_diagonal="projectiles/darkmissile-ne.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-250
                                                                        end=-180
                                                                        sound=magic-dark.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-180
                                                                        end=-70
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Ice Wave"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [missile_frame]
                                                                        begin=-200
                                                                        end=0
                                                                        image="projectiles/darkmissile-n.png"
                                                                        image_diagonal="projectiles/darkmissile-ne.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-250
                                                                        end=-180
                                                                        sound=magic-dark-miss.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-130
                                                                        end=-70
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-130
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "130 gold - Energy Wave: 10-1 Ranged Arcane Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=129
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Energy Wave"
                                                                icon=attacks/lightbeam.png
                                                                type=arcane
                                                                range=ranged
                                                                [specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/specials]
                                                                damage=10
                                                                number=1
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Energy Wave"
                                                                    [/filter_attack]
                                                                    [missile_frame]
                                                                        begin=-180
                                                                        end=0
                                                                        image="projectiles/whitemissile-n.png"
                                                                        image_diagonal="projectiles/whitemissile-ne.png"
                                                                        halo=halo/holy/white-mage-halo1.png,halo/holy/white-mage-halo2.png,halo/holy/white-mage-halo3.png,halo/holy/white-mage-halo4.png
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-300
                                                                        end=-225
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-225
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=-75
                                                                        halo=halo/holy/halo6.png
                                                                    [/frame]
                                                                    [if]
                                                                        hits=yes
                                                                        [frame]
                                                                            begin=-75
                                                                            end=0
                                                                            sound={SOUND_LIST:HOLY}
                                                                            halo=halo/holy/halo1.png
                                                                        [/frame]
                                                                    [/if]
                                                                    [else]
                                                                        hits=no
                                                                        [frame]
                                                                            begin=-75
                                                                            end=0
                                                                            sound={SOUND_LIST:HOLY_MISS}
                                                                            halo=halo/holy/halo1.png
                                                                        [/frame]
                                                                    [/else]
                                                                    [frame]
                                                                        begin=0
                                                                        end=75
                                                                        halo=halo/holy/halo3.png
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=75
                                                                        end=150
                                                                        halo=halo/holy/halo5.png
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=150
                                                                        end=200
                                                                        halo=halo/holy/halo6.png
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=200
                                                                        end=250
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=250
                                                                        end=300
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-130
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "150 gold - Force Projectile: 4-2 Ranged Force"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=149
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Force Projectile"
                                                                icon=attacks/sling.png
                                                                type=force
                                                                range=ranged
                                                                damage=4
                                                                number=2
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Force Projectile"
                                                                    [/filter_attack]
                                                                    hits=no
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/stone.png"
                                                                        image_diagonal="projectiles/stone.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-400
                                                                        end=-100
                                                                        sound=sling-miss.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-100
                                                                        end=50
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Force Projectile"
                                                                    [/filter_attack]
                                                                    hits=yes
                                                                    [missile_frame]
                                                                        begin=-150
                                                                        end=0
                                                                        image="projectiles/stone.png"
                                                                        image_diagonal="projectiles/stone.png"
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-400
                                                                        end=-100
                                                                        sound=sling.ogg
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-100
                                                                        end=50
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-150
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "175 gold - Energy Blast: 10-1 Ranged Arcane Focus"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than=174
                                                    [/variable]
                                                    [then]
                                                        [object]
                                                            silent=yes
                                                            duration=forever
                                                            [effect]
                                                                apply_to=new_attack
                                                                name= _ "Energy Blast"
                                                                icon=attacks/lightbeam.png
                                                                type=arcane
                                                                range=ranged
                                                                [specials]
                                                                    [damage]
                                                                        id=focus
                                                                        name= _ "focus"
                                                                        description= _ "When used offensively, this attack always has a 70% chance to hit and causes both the attacker and the defender to do 50% more damage than usual. This weapon special isn't activated on defense."
                                                                        multiply=1.5
                                                                        apply_to=both
                                                                        active_on=offense
                                                                    [/damage]
                                                                    [chance_to_hit]
                                                                        id=focus
                                                                        value=70
                                                                        cumulative=no
                                                                        active_on=offense
                                                                    [/chance_to_hit]
                                                                [/specials]
                                                                damage=10
                                                                number=1
                                                            [/effect]
                                                            [effect]
                                                                apply_to=new_animation
                                                                [attack_anim]
                                                                    [filter_attack]
                                                                        name=_ "Energy Wave"
                                                                    [/filter_attack]
                                                                    [missile_frame]
                                                                        begin=-180
                                                                        end=0
                                                                        image="projectiles/whitemissile-n.png"
                                                                        image_diagonal="projectiles/whitemissile-ne.png"
                                                                        halo=halo/holy/white-mage-halo1.png,halo/holy/white-mage-halo2.png,halo/holy/white-mage-halo3.png,halo/holy/white-mage-halo4.png
                                                                    [/missile_frame]
                                                                    [frame]
                                                                        begin=-300
                                                                        end=-225
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-225
                                                                        end=-150
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=-150
                                                                        end=-75
                                                                        halo=halo/holy/halo6.png
                                                                    [/frame]
                                                                    [if]
                                                                        hits=yes
                                                                        [frame]
                                                                            begin=-75
                                                                            end=0
                                                                            sound={SOUND_LIST:HOLY}
                                                                            halo=halo/holy/halo1.png
                                                                        [/frame]
                                                                    [/if]
                                                                    [else]
                                                                        hits=no
                                                                        [frame]
                                                                            begin=-75
                                                                            end=0
                                                                            sound={SOUND_LIST:HOLY_MISS}
                                                                            halo=halo/holy/halo1.png
                                                                        [/frame]
                                                                    [/else]
                                                                    [frame]
                                                                        begin=0
                                                                        end=75
                                                                        halo=halo/holy/halo3.png
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=75
                                                                        end=150
                                                                        halo=halo/holy/halo5.png
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=150
                                                                        end=200
                                                                        halo=halo/holy/halo6.png
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=200
                                                                        end=250
                                                                    [/frame]
                                                                    [frame]
                                                                        begin=250
                                                                        end=300
                                                                    [/frame]
                                                                [/attack_anim]
                                                            [/effect]
                                                        [/object]
                                                        [gold]
                                                            side=$side_number
                                                            amount=-175
                                                        [/gold]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]
                                    [/message]
                                    [redraw]
                                    [/redraw]
                                [/do]
                            [/while]
                        [/command]
                    [/option]

                    [option]
                        message= _ "Armory"
                        [command]
                            {VARIABLE finished_sub no}
                            [while]
                                [variable]
                                    name=finished_sub
                                    equals=no
                                [/variable]
                                [do]
                                    [store_gold]
                                        side=$side_number
                                        variable=gold
                                    [/store_gold]
                                    {VARIABLE_OP left format $armors_left_$side_number}
                                    [message]
                                        speaker=narrator
                                        # wmllint: display on
                                        message="<225,225,25>" + _ "Gold: " + "$gold
@" + _ "Upgrades left: " + "$left
 
~<20,200,250>" + _ "Extra resistances bought:" + "
<20,200,250>" + _ "Blade: +" + $resistance_bought_blade_$side_number + "%
<20,200,250>" + _ "Pierce: +" + $resistance_bought_pierce_$side_number + "%
<20,200,250>" + _ "Impact: +" + $resistance_bought_impact_$side_number + "%
<20,200,250>" + _ "Fire: +" + $resistance_bought_fire_$side_number + "%
<20,200,250>" + _ "Cold: +" + $resistance_bought_cold_$side_number + "%
<20,200,250>" + _ "Arcane: +" + $resistance_bought_arcane_$side_number + "%" # wmllint: no spellcheck
                                        # wmllint: display off

                                        [option]
                                            message= _ "Done"
                                            [command]
                                                {VARIABLE finished_sub yes}
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "30 gold: +10% Blade Resistance"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=30
                                                    [/variable]
                                                    [variable]
                                                        name=left
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-30
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP armors_left_$side_number add -1}
                                                        {VARIABLE_OP resistance_bought_blade_$side_number add 10}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=resistance
                                                                replace=no
                                                                [resistance]
                                                                    blade=-10
                                                                [/resistance]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]
                                        [option]
                                            message= _ "30 gold: +10% Pierce Resistance"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=30
                                                    [/variable]
                                                    [variable]
                                                        name=left
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-30
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP armors_left_$side_number add -1}
                                                        {VARIABLE_OP resistance_bought_pierce_$side_number add 10}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=resistance
                                                                replace=no
                                                                [resistance]
                                                                    pierce=-10
                                                                [/resistance]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]
                                        [option]
                                            message= _ "30 gold: +10% Impact Resistance"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=30
                                                    [/variable]
                                                    [variable]
                                                        name=left
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-30
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP armors_left_$side_number add -1}
                                                        {VARIABLE_OP resistance_bought_impact_$side_number add 10}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=resistance
                                                                replace=no
                                                                [resistance]
                                                                    impact=-10
                                                                [/resistance]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]
                                        [option]
                                            message= _ "25 gold: +10% Fire Resistance"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=25
                                                    [/variable]
                                                    [variable]
                                                        name=left
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-25
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP armors_left_$side_number add -1}
                                                        {VARIABLE_OP resistance_bought_fire_$side_number add 10}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=resistance
                                                                replace=no
                                                                [resistance]
                                                                    fire=-10
                                                                [/resistance]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]
                                        [option]
                                            message= _ "25 gold: +10% Cold Resistance"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=25
                                                    [/variable]
                                                    [variable]
                                                        name=left
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-25
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP armors_left_$side_number add -1}
                                                        {VARIABLE_OP resistance_bought_cold_$side_number add 10}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=resistance
                                                                replace=no
                                                                [resistance]
                                                                    cold=-10
                                                                [/resistance]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]
                                        [option]
                                            message= _ "30 gold: +10% Arcane Resistance"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=30
                                                    [/variable]
                                                    [variable]
                                                        name=left
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-30
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP armors_left_$side_number add -1}
                                                        {VARIABLE_OP resistance_bought_arcane_$side_number add 10}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=resistance
                                                                replace=no
                                                                [resistance]
                                                                    arcane=-10
                                                                [/resistance]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]
                                        image=wesnoth-icon.png
                                    [/message]
                                    [redraw]
                                    [/redraw]
                                [/do]
                            [/while]
                        [/command]
                    [/option]

                    [option]
                        message= _ "Ability Store"
                        [command]
                            {VARIABLE finished_sub no}
                            [while]
                                [variable]
                                    name=finished_sub
                                    equals=no
                                [/variable]
                                [do]
                                    [store_gold]
                                        side=$side_number
                                        variable=gold
                                    [/store_gold]
                                    [message]
                                        speaker=narrator
                                        message= _ "<225,225,25>Gold: $gold|"

                                        [option]
                                            message= _ "Done"
                                            [command]
                                                {VARIABLE finished_sub yes}
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "50: Ambush"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=50
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-50
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=new_ability
                                                                [abilities]
                                                                    {ABILITY_AMBUSH}
                                                                [/abilities]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "50: Nightstalk"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=50
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-50
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=new_ability
                                                                [abilities]
                                                                    {ABILITY_NIGHTSTALK}
                                                                [/abilities]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60: Cure"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=new_ability
                                                                [abilities]
                                                                    {ABILITY_CURES}
                                                                [/abilities]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "90: Regenerate"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=90
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-90
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=new_ability
                                                                [abilities]
                                                                    {ABILITY_REGENERATES}
                                                                [/abilities]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "150: Feeding"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=150
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-150
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=new_ability
                                                                [abilities]
                                                                    {ABILITY_FEEDING}
                                                                [/abilities]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "175: Steadfast"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=175
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-175
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=new_ability
                                                                [abilities]
                                                                    {ABILITY_STEADFAST}
                                                                [/abilities]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Dauntless"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=new_ability
                                                                [abilities]
                                                                    {ABILITY_DAUNTLESS}
                                                                [/abilities]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Protection"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=new_ability
                                                                [abilities]
                                                                    {ABILITY_PROTECTION_LEVEL_4}
                                                                [/abilities]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "300: Skirmisher"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=300
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-300
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=new_ability
                                                                [abilities]
                                                                    {ABILITY_SKIRMISHER}
                                                                [/abilities]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        image=wesnoth-icon.png
                                    [/message]
                                    [redraw]
                                    [/redraw]
                                [/do]
                            [/while]
                        [/command]
                    [/option]

                    [option]
                        message= _ "Weapon Smith"
                        [command]
                            {VARIABLE finished_sub no}
                            [while]
                                [variable]
                                    name=finished_sub
                                    equals=no
                                [/variable]
                                [do]
                                    [store_gold]
                                        side=$side_number
                                        variable=gold
                                    [/store_gold]
                                    [message]
                                        speaker=narrator
                                        message= _ "<225,225,25>Gold: $gold|"

                                        [option]
                                            # wmllint: display on
                                            message= _ "Done     Warning : May only have 1 ability per weapon type;
it replaces the old ability."
                                            # wmllint: display off
                                            [command]
                                                {VARIABLE finished_sub yes}
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Melee Blade weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "150: Melee Blade weapons receive Charge"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=150
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-150
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_CHARGE}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Melee Blade weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Blade weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Blade weapons receive Rage"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=blade
                                                                [set_specials]
                                                                    [berserk]
                                                                        id=berserk
                                                                        name= _ "rage"
                                                                        description= _ "Whether used offensively or defensively, this attack presses the engagement until one of the combatants is slain, or 3 rounds of attacks have occurred."
                                                                        value=3
                                                                    [/berserk]
                                                                [/set_specials]
                                                                defense_weight=0
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "300: Melee Blade weapons receive Berserk"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=300
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-300
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BERSERK}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Melee Blade weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Melee Pierce weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "150: Melee Pierce weapons receive Charge"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=150
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-150
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_CHARGE}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Melee Pierce weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Pierce weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Pierce weapons receive Rage"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=pierce
                                                                [set_specials]
                                                                    [berserk]
                                                                        id=berserk
                                                                        name= _ "rage"
                                                                        description= _ "Whether used offensively or defensively, this attack presses the engagement until one of the combatants is slain, or 3 rounds of attacks have occurred."
                                                                        value=3
                                                                    [/berserk]
                                                                [/set_specials]
                                                                defense_weight=0
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "300: Melee Pierce weapons receive Berserk"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=300
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-300
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BERSERK}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Melee Pierce weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Melee Impact weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "150: Melee Impact weapons receive Charge"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=150
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-150
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_CHARGE}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Melee Impact weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Impact weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Impact weapons receive Rage"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=impact
                                                                [set_specials]
                                                                    [berserk]
                                                                        id=berserk
                                                                        name= _ "rage"
                                                                        description= _ "Whether used offensively or defensively, this attack presses the engagement until one of the combatants is slain, or 3 rounds of attacks have occurred."
                                                                        value=3
                                                                    [/berserk]
                                                                [/set_specials]
                                                                defense_weight=0
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "300: Melee Impact weapons receive Berserk"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=300
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-300
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BERSERK}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Melee Impact weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Melee Fire weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "150: Melee Fire weapons receive Charge"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=150
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-150
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_CHARGE}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Melee Fire weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Fire weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Fire weapons receive Rage"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=fire
                                                                [set_specials]
                                                                    [berserk]
                                                                        id=berserk
                                                                        name= _ "rage"
                                                                        description= _ "Whether used offensively or defensively, this attack presses the engagement until one of the combatants is slain, or 3 rounds of attacks have occurred."
                                                                        value=3
                                                                    [/berserk]
                                                                [/set_specials]
                                                                defense_weight=0
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "300: Melee Fire weapons receive Berserk"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=300
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-300
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BERSERK}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Melee Fire weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Melee Cold weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "150: Melee Cold weapons receive Charge"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=150
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-150
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_CHARGE}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Melee Cold weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Cold weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Cold weapons receive Rage"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=cold
                                                                [set_specials]
                                                                    [berserk]
                                                                        id=berserk
                                                                        name= _ "rage"
                                                                        description= _ "Whether used offensively or defensively, this attack presses the engagement until one of the combatants is slain, or 3 rounds of attacks have occurred."
                                                                        value=3
                                                                    [/berserk]
                                                                [/set_specials]
                                                                defense_weight=0
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "300: Melee Cold weapons receive Berserk"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=300
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-300
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BERSERK}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Melee Cold weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Melee Arcane weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "150: Melee Arcane weapons receive Charge"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=150
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-150
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_CHARGE}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Melee Arcane weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Arcane weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Arcane weapons receive Rage"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=arcane
                                                                [set_specials]
                                                                    [berserk]
                                                                        id=berserk
                                                                        name= _ "rage"
                                                                        description= _ "Whether used offensively or defensively, this attack presses the engagement until one of the combatants is slain, or 3 rounds of attacks have occurred."
                                                                        value=3
                                                                    [/berserk]
                                                                [/set_specials]
                                                                defense_weight=0
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "300: Melee Arcane weapons receive Berserk"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=300
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-300
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BERSERK}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Melee Arcane weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Melee Force weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=force
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Melee Force weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                type=force
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Ranged Blade weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Ranged Blade weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Ranged Blade weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "350: Ranged Blade weapons receive Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=350
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-350
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Ranged Blade weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=blade
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Ranged Pierce weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Ranged Pierce weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Ranged Pierce weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "350: Ranged Pierce weapons receive Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=350
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-350
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Ranged Pierce weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=pierce
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Ranged Impact weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Ranged Impact weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Ranged Impact weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "350: Ranged Impact weapons receive Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=350
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-350
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Ranged Impact weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=impact
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Ranged Fire weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Ranged Fire weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Ranged Fire weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "350: Ranged Fire weapons receive Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=350
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-350
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Ranged Fire weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=fire
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Ranged Cold weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Ranged Cold weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Ranged Cold weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "350: Ranged Cold weapons receive Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=350
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-350
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Ranged Cold weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=cold
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Ranged Arcane weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "200: Ranged Arcane weapons receive Marksman"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=200
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-200
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MARKSMAN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Ranged Arcane weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "350: Ranged Arcane weapons receive Magical"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=350
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-350
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_MAGICAL}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "400: Ranged Arcane weapons receive Drain"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=400
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-400
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=arcane
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_DRAIN}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "100: Ranged Force weapons receive Backstab"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=100
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-100
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=force
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_BACKSTAB}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "250: Ranged Force weapons receive Slow"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=250
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-250
                                                            side=$side_number
                                                        [/gold]
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                type=force
                                                                [set_specials]
                                                                    {WEAPON_SPECIAL_SLOW}
                                                                [/set_specials]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        image=wesnoth-icon.png
                                    [/message]
                                    [redraw]
                                    [/redraw]
                                [/do]
                            [/while]
                        [/command]
                    [/option]

                    [option]
                        message= _ "Terrain Training"
                        [command]
                            {VARIABLE finished_sub no}
                            [while]
                                [variable]
                                    name=finished_sub
                                    equals=no
                                [/variable]
                                [do]
                                    [store_gold]
                                        side=$side_number
                                        variable=gold
                                    [/store_gold]
                                    {VARIABLE_OP lefty format $terrains_lefty_$side_number}
                                    [message]
                                        speaker=narrator
                                        # wmllint: display on
                                        message="<225,225,25>" + _ "Gold: " + "$gold
@" + _ "Training left: " + "$lefty

~<250,0,0>" + _ "Terrains Trained:" + "
<20,200,250>" + _ "Shallow Water: " + $move_bought_shallow_$side_number + _ " Trained" + "
<20,200,250>" + _ "Swamp: " + $move_bought_swamp_$side_number + _ " Trained" + "
<20,200,250>" + _ "Plains: " + $move_bought_grass_$side_number + _ " Trained" + "
<20,200,250>" + _ "Sand: " + $move_bought_sand_$side_number + _ " Trained" + "
<20,200,250>" + _ "Forest: " + $move_bought_forest_$side_number + _ " Trained" + "
<20,200,250>" + _ "Hills: " + $move_bought_hills_$side_number + _ " Trained" + "
<20,200,250>" + _ "Mountain: " + $move_bought_mountain_$side_number + _ " Trained" + "
<20,200,250>" + _ "Castle: " + $move_bought_castle_$side_number + _ " Trained" + "
<20,200,250>" + _ "Cave: " + $move_bought_cave_$side_number + _ " Trained" + "
<20,200,250>" + _ "Snow: " + $move_bought_tundra_$side_number + _ " Trained" + "
<20,200,250>" + _ "Mushroom Grove: " + $move_bought_fungus_$side_number + _ " Trained" # wmllint no spellcheck
                                        # wmllint: display off

                                        [option]
                                            message= _ "Done"
                                            [command]
                                                {VARIABLE finished_sub yes}
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Shallow Water Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_shallow_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_shallow_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    shallow_water=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Swamp Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_swamp_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_swamp_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    swamp_water=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Plains Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_grass_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_grass_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    flat=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Sand Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_sand_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_sand_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    sand=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Forest Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_forest_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_forest_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    forest=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Hills Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_hills_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_hills_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    hills=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Mountain Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_mountain_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_mountain_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    mountains=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Castle Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_castle_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_castle_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    castle=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Cave Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_cave_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_cave_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    cave=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Snow Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_tundra_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_tundra_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    frozen=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        [option]
                                            message= _ "60 gold: Set Mushroom Grove Movement to 1"
                                            [command]
                                                [if]
                                                    [variable]
                                                        name=move_bought_fungus_$side_number
                                                        equals=0
                                                    [/variable]
                                                    [variable]
                                                        name=gold
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [variable]
                                                        name=lefty
                                                        greater_than=0
                                                    [/variable]
                                                    [then]
                                                        [gold]
                                                            amount=-60
                                                            side=$side_number
                                                        [/gold]
                                                        {VARIABLE_OP terrains_lefty_$side_number add -1}
                                                        {VARIABLE move_bought_fungus_$side_number 1}
                                                        [object]
                                                            silent=yes
                                                            [effect]
                                                                apply_to=movement_costs
                                                                replace=yes
                                                                [movement_costs]
                                                                    fungus=1
                                                                [/movement_costs]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                [/if]
                                            [/command]
                                        [/option]

                                        image=wesnoth-icon.png
                                    [/message]
                                    [redraw]
                                    [/redraw]
                                [/do]
                            [/while]
                        [/command]
                    [/option]
                [/message]
                [redraw]
                [/redraw]
            [/do]
        [/while]
        {CLEAR_VARIABLE left}
        {CLEAR_VARIABLE finished}
        {CLEAR_VARIABLE TempGoldStore1}
        {CLEAR_VARIABLE TempGoldStore2}
        {CLEAR_VARIABLE TempGoldStore3}
        {CLEAR_VARIABLE TempGoldStore4}
        {CLEAR_VARIABLE TempGoldStore5}
        {CLEAR_VARIABLE playername1}
        {CLEAR_VARIABLE playername2}
        {CLEAR_VARIABLE playername3}
        {CLEAR_VARIABLE playername4}
        {CLEAR_VARIABLE playername5}
        {CLEAR_VARIABLE shop_message}
    [/event]
#enddef

#-------------------------------------------------------------
# This pops up an option window after the first player's move,
# giving him the possiblity to choose his prefered difficulty
# grade.
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#-------------------------------------------------------------
#define SURVIVALX_CHOOSE_DIFFICULTY
    [event]
        name=moveto
        first_time_only=yes
        [filter]
            side=1,2,3,4,5
        [/filter]
        [message]
            speaker=narrator
            message= _ "Choose the difficulty. Your setting will affect the amount of gold you will gain by killing enemies, as well as their toughness and strength. However, choose your difficulty carefully as you can't change it anymore later."
            [option]
                message="*~<0,128,255>" + _ "Simple" # wmllint: no spellcheck
                [command]
                    {VARIABLE killbonus_0_0 7}
                    {VARIABLE killbonus_0_1 14}
                    {VARIABLE killbonus_0_2 16}
                    {VARIABLE killbonus_0_3 18}
                    {VARIABLE killbonus_0_4 21}
                    {VARIABLE killbonus_0_5 23}
                    {VARIABLE killbonus_1_0 15}
                    {VARIABLE killbonus_1_1 20}
                    {VARIABLE killbonus_1_2 24}
                    {VARIABLE killbonus_1_3 29}
                    {VARIABLE killbonus_1_4 34}
                    {VARIABLE killbonus_1_5 39}
                    {VARIABLE killbonus_2_0 18}
                    {VARIABLE killbonus_2_1 23}
                    {VARIABLE killbonus_2_2 33}
                    {VARIABLE killbonus_2_3 40}
                    {VARIABLE killbonus_2_4 48}
                    {VARIABLE killbonus_2_5 55}
                    {VARIABLE_OP brutal add -5}
                    [sound]
                        name=dragonstick.ogg
                    [/sound]
                    [print]
                        text=_ "Difficulty: SIMPLE"
                        size=24
                        duration=500
                        red,green,blue=0,128,255
                    [/print]
                    {VARIABLE difficulty 50}
                [/command]
            [/option]
            [option]
                message="*~<0,200,0>" + _ "Easy" # wmllint: no spellcheck
                [command]
                    {VARIABLE killbonus_0_0 6}
                    {VARIABLE killbonus_0_1 12}
                    {VARIABLE killbonus_0_2 14}
                    {VARIABLE killbonus_0_3 16}
                    {VARIABLE killbonus_0_4 19}
                    {VARIABLE killbonus_0_5 21}
                    {VARIABLE killbonus_1_0 13}
                    {VARIABLE killbonus_1_1 18}
                    {VARIABLE killbonus_1_2 22}
                    {VARIABLE killbonus_1_3 27}
                    {VARIABLE killbonus_1_4 32}
                    {VARIABLE killbonus_1_5 37}
                    {VARIABLE killbonus_2_0 16}
                    {VARIABLE killbonus_2_1 21}
                    {VARIABLE killbonus_2_2 31}
                    {VARIABLE killbonus_2_3 38}
                    {VARIABLE killbonus_2_4 45}
                    {VARIABLE killbonus_2_5 52}
                    {VARIABLE_OP brutal add 0}
                    [sound]
                        name=dragonstick.ogg
                    [/sound]
                    [print]
                        text=_ "Difficulty: EASY"
                        size=24
                        duration=500
                        red,green,blue=0,200,0
                    [/print]
                    {VARIABLE difficulty 75}
                [/command]
            [/option]
            [option]
                message="*~<255,255,0>" + _ "Normal" # wmllint: no spellcheck
                [command]
                    {VARIABLE killbonus_0_0 5}
                    {VARIABLE killbonus_0_1 10}
                    {VARIABLE killbonus_0_2 12}
                    {VARIABLE killbonus_0_3 14}
                    {VARIABLE killbonus_0_4 17}
                    {VARIABLE killbonus_0_5 19}
                    {VARIABLE killbonus_1_0 11}
                    {VARIABLE killbonus_1_1 16}
                    {VARIABLE killbonus_1_2 20}
                    {VARIABLE killbonus_1_3 25}
                    {VARIABLE killbonus_1_4 30}
                    {VARIABLE killbonus_1_5 35}
                    {VARIABLE killbonus_2_0 14}
                    {VARIABLE killbonus_2_1 19}
                    {VARIABLE killbonus_2_2 29}
                    {VARIABLE killbonus_2_3 36}
                    {VARIABLE killbonus_2_4 43}
                    {VARIABLE killbonus_2_5 50}
                    {VARIABLE_OP brutal add 5}
                    [sound]
                        name=dragonstick.ogg
                    [/sound]
                    [print]
                        text=_ "Difficulty: NORMAL"
                        size=24
                        duration=500
                        red,green,blue=255,255,0
                    [/print]
                    {VARIABLE difficulty 100}
                [/command]
            [/option]
            [option]
                message="*~<255,128,0>" + _ "Hard" # wmllint: no spellcheck
                [command]
                    {VARIABLE killbonus_0_0 4}
                    {VARIABLE killbonus_0_1 8}
                    {VARIABLE killbonus_0_2 10}
                    {VARIABLE killbonus_0_3 12}
                    {VARIABLE killbonus_0_4 15}
                    {VARIABLE killbonus_0_5 17}
                    {VARIABLE killbonus_1_0 9}
                    {VARIABLE killbonus_1_1 14}
                    {VARIABLE killbonus_1_2 18}
                    {VARIABLE killbonus_1_3 23}
                    {VARIABLE killbonus_1_4 28}
                    {VARIABLE killbonus_1_5 33}
                    {VARIABLE killbonus_2_0 12}
                    {VARIABLE killbonus_2_1 17}
                    {VARIABLE killbonus_2_2 27}
                    {VARIABLE killbonus_2_3 34}
                    {VARIABLE killbonus_2_4 41}
                    {VARIABLE killbonus_2_5 48}
                    {VARIABLE_OP brutal add 10}
                    [sound]
                        name=dragonstick.ogg
                    [/sound]
                    [print]
                        text=_ "Difficulty: HARD"
                        size=24
                        duration=500
                        red,green,blue=255,128,0
                    [/print]
                    {VARIABLE difficulty 125}
                [/command]
            [/option]
            [option]
                message="*~<255,0,0>" + _ "Xtreme" # wmllint: no spellcheck
                [command]
                    {VARIABLE killbonus_0_0 3}
                    {VARIABLE killbonus_0_1 6}
                    {VARIABLE killbonus_0_2 8}
                    {VARIABLE killbonus_0_3 10}
                    {VARIABLE killbonus_0_4 13}
                    {VARIABLE killbonus_0_5 15}
                    {VARIABLE killbonus_1_0 7}
                    {VARIABLE killbonus_1_1 12}
                    {VARIABLE killbonus_1_2 16}
                    {VARIABLE killbonus_1_3 21}
                    {VARIABLE killbonus_1_4 26}
                    {VARIABLE killbonus_1_5 31}
                    {VARIABLE killbonus_2_0 10}
                    {VARIABLE killbonus_2_1 18}
                    {VARIABLE killbonus_2_2 25}
                    {VARIABLE killbonus_2_3 32}
                    {VARIABLE killbonus_2_4 39}
                    {VARIABLE killbonus_2_5 46}
                    {VARIABLE_OP brutal add 15}
                    [sound]
                        name=dragonstick.ogg
                    [/sound]
                    [print]
                        text=_ "Difficulty: XTREME"
                        size=32
                        duration=750
                        red,green,blue=255,0,0
                    [/print]
                    {VARIABLE difficulty 150}
                    [music]
                        name=frantic.ogg
                        play_once=yes
                        immediate=yes
                    [/music]
                [/command]
            [/option]
            [option]
                message="*~<128,0,128>" + _ "Mad Mode" # wmllint: no spellcheck
                [command]
                    {VARIABLE killbonus_0_0 3}
                    {VARIABLE killbonus_0_1 5}
                    {VARIABLE killbonus_0_2 7}
                    {VARIABLE killbonus_0_3 9}
                    {VARIABLE killbonus_0_4 11}
                    {VARIABLE killbonus_0_5 13}
                    {VARIABLE killbonus_1_0 6}
                    {VARIABLE killbonus_1_1 10}
                    {VARIABLE killbonus_1_2 14}
                    {VARIABLE killbonus_1_3 18}
                    {VARIABLE killbonus_1_4 22}
                    {VARIABLE killbonus_1_5 26}
                    {VARIABLE killbonus_2_0 9}
                    {VARIABLE killbonus_2_1 15}
                    {VARIABLE killbonus_2_2 21}
                    {VARIABLE killbonus_2_3 27}
                    {VARIABLE killbonus_2_4 33}
                    {VARIABLE killbonus_2_5 39}
                    {VARIABLE_OP brutal add 20}
                    [sound]
                        name=dragonstick.ogg
                    [/sound]
                    [print]
                        text=_ "Difficulty: MAD MODE"
                        size=40
                        duration=1000
                        red,green,blue=128,0,128
                    [/print]
                    {VARIABLE difficulty 200}
                    [music]
                        name=frantic.ogg
                        play_once=yes
                        immediate=yes
                    [/music]
                [/command]
            [/option]
            image=wesnoth-icon.png
        [/message]
    [/event]
#enddef

#--------------------------------------------------------------
# This places a chest that contains a fixed amount of gold.
# Usage: X Y are the coordinates where the chest should appear.
#        AMOUNT is the amount of gold stored in the chest.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_GOLD X Y AMOUNT
    [item]
        x,y={X},{Y}
        image=items/chest-plain-closed.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [store_unit]
            variable=chests
            [filter]
                x,y={X},{Y}
            [/filter]
        [/store_unit]
        [removeitem]
        [/removeitem]
        [print]
            text= _ "Gold! Every player gains " + {AMOUNT} + _ " gold."
            size=24
            duration=150
            red,green,blue=225,225,0
        [/print]
        [if]
            [have_unit]
                side=1
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=1
                    amount={AMOUNT}
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=2
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=2
                    amount={AMOUNT}
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=3
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=3
                    amount={AMOUNT}
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=4
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=4
                    amount={AMOUNT}
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=5
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=5
                    amount={AMOUNT}
                [/gold]
            [/then]
        [/if]
        [unstore_unit]
            variable=chests
        [/unstore_unit]
        [store_unit]
            [filter]
                side=1
                canrecruit=yes
            [/filter]
            variable=chest_leader_1
        [/store_unit]
        [unstore_unit]
            variable=chest_leader_1
            text={AMOUNT}
            red,green,blue=255,255,0
        [/unstore_unit]
        [store_unit]
            [filter]
                side=2
                canrecruit=yes
            [/filter]
            variable=chest_leader_2
        [/store_unit]
        [unstore_unit]
            variable=chest_leader_2
            text={AMOUNT}
            red,green,blue=255,255,0
        [/unstore_unit]
        [store_unit]
            [filter]
                side=3
                canrecruit=yes
            [/filter]
            variable=chest_leader_3
        [/store_unit]
        [unstore_unit]
            variable=chest_leader_3
            text={AMOUNT}
            red,green,blue=255,255,0
        [/unstore_unit]
        [store_unit]
            [filter]
                side=4
                canrecruit=yes
            [/filter]
            variable=chest_leader_4
        [/store_unit]
        [unstore_unit]
            variable=chest_leader_4
            text={AMOUNT}
            red,green,blue=255,255,0
        [/unstore_unit]
        [store_unit]
            [filter]
                side=5
                canrecruit=yes
            [/filter]
            variable=chest_leader_5
        [/store_unit]
        [unstore_unit]
            variable=chest_leader_5
            text={AMOUNT}
            red,green,blue=255,255,0
        [/unstore_unit]
        [sound]
            name=gold.ogg
        [/sound]
    [/event]
#enddef

#-------------------------------------------------------------
# This places a chest with a fixed amount of gold.
# It only appears when a player dies, however, and should not
# be used regularly. The death event of a player handles this.
#-------------------------------------------------------------
#define SURVIVALX_CHEST_DEATH_GOLD X Y AMOUNT
    [item]
        x,y={X},{Y}
        image=items/chest-plain-closed.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [store_unit]
            variable=chests
            [filter]
                x,y={X},{Y}
            [/filter]
        [/store_unit]
        [removeitem]
        [/removeitem]
        [print]
            text= _ "You found " + {AMOUNT} + _ " gold."
            size=24
            duration=150
            red,green,blue=225,225,0
        [/print]
        [gold]
            side=$chests.side
            amount={AMOUNT}
        [/gold]
        [unstore_unit]
            variable=chests
            text={AMOUNT}
            red,green,blue=255,255,0
        [/unstore_unit]
        [sound]
            name=gold.ogg
        [/sound]
    [/event]
#enddef

#--------------------------------------------------------------
# This places a magical ring. This ring raises
# it's owner's defense in every terrain by 10%, and is very
# valueful. There should not be more than 2 rings available
# for normal units in each map, or else there is the danger
# of the player becoming unhitable.
# Usage: X Y are the coordinates where the chest should appear.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_DEFRING X Y
    [item]
        x,y={X},{Y}
        image=items/ring-gold.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [message]
            image=items/ring-gold.png
            speaker=narrator
            message= _ "You found a glowing little ring... This magical ring will help you to avoid your enemies' attacks."
            image=items/ring-gold.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=defense
                replace=no
                [defense]
                    deep_water=-10%
                    shallow_water=-10%
                    swamp_water=-10%
                    flat=-10%
                    sand=-10%
                    forest=-10%
                    hills=-10%
                    mountains=-10%
                    village=-10%
                    castle=-10%
                    cave=-10%
                    frozen=-10%
                    unwalkable=-10%
                    impassable=-10%
                    fungus=-10%
                [/defense]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places a green cloak. This cloak reduce
# it's owner's movement costs in every category to 1, and is very
# valueful.
# Usage: X Y are the coordinates where the chest should appear.
#--------------------------------------------------------------

#define SURVIVALX_CHEST_CLOAK X Y
    [item]
        x,y={X},{Y}
        image=items/cloak-green.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/cloak-green.png
            speaker=narrator
            message= _ "You found a Green Cloak... This magical Cloak will reduce your Movement Costs in every Category to 1. You feel as if you were flying."
            image=items/cloak-green.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=movement_costs
                replace=yes
                [movement_costs]
                    deep_water=1
                    shallow_water=1
                    swamp_water=1
                    flat=1
                    sand=1
                    forest=1
                    hills=1
                    mountains=1
                    village=1
                    castle=1
                    cave=1
                    frozen=1
                    unwalkable=1
                    impassable=100
                    fungus=1
                [/movement_costs]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Cornucopia of Fortune. This Item increases
# the income from kills by 20% and is very
# valueful.
# Usage: X Y are the coordinates where the chest should appear.
#--------------------------------------------------------------

#define SURVIVALX_CHEST_CORNUCOPIA X Y
    [item]
        x,y={X},{Y}
        image=items/ornate2.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/ornate2.png
            speaker=narrator
            message= _ "You found the legendary Cornucopia of Fortune. Income from Kills is raised by 20 Percent."
            image=items/ornate2.png
        [/message]
        {VARIABLE cornucopia 1}
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Ancient Sceptre of Cantar. This Item increases
# the damage of adjacent own and allied units by 25% and is very
# valueful.
# Usage: X Y are the coordinates where the chest should appear.
#--------------------------------------------------------------

#define SURVIVALX_CHEST_SCEPTRE X Y
    [item]
        x,y={X},{Y}
        image=items/sceptre-of-fire.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/sceptre-of-fire.png
            speaker=narrator
            message= _ "You found the Ancient Sceptre of Cantar. Your damage and damage of adjacent own and allied Units as well is increased by 25 Percent."
            image=items/sceptre-of-fire.png
        [/message]
        [object]
            [effect]
                apply_to=new_ability
                [abilities]
                    [leadership]
                        id=sceptre_cantar
                        value=25
                        cumulative=no
                        name= _ "sceptre of cantar"
                        description= _ "The Ancient Sceptre of Cantar: increases damage of self, adjacent own and allied units by 25 Percent. it is a non-cumulative leadership ability."
                        affect_self=yes
                        affect_allies=yes
                        affect_enemies=no
                        [affect_adjacent]
                            adjacent=n,ne,se,s,sw,nw
                        [/affect_adjacent]
                    [/leadership]
                [/abilities]
            [/effect]
            silent=yes
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Holy sword of the Crusader. It increases
# your damage and adjacent allied units' damage by 25%.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_SWORD X Y
    [item]
        x,y={X},{Y}
        image=items/flame-sword.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/flame-sword.png
            speaker=narrator
            message= _ "You found the Holy Sword of the Crusader. Your damage and damage of adjacent own and allied Units as well is increased by 25 Percent."
            image=items/flame-sword.png
        [/message]
        [object]
            [effect]
                apply_to=new_ability
                [abilities]
                    [leadership]
                        id=sword_crusader
                        value=25
                        cumulative=no
                        name= _ "sword of the crusader"
                        description= _ "The Holy Sword of the Crusader: increases damage of self, adjacent own and allied units by 25 Percent. it is a non-cumulative leadership ability."
                        affect_self=yes
                        affect_allies=yes
                        affect_enemies=no
                        [affect_adjacent]
                            adjacent=n,ne,se,s,sw,nw
                        [/affect_adjacent]
                    [/leadership]
                [/abilities]
            [/effect]
            silent=yes
        [/object]
    [/event]
#enddef
#--------------------------------------------------------------
# This places the Crystal Bow of the Hunter. It increases
# your damage and adjacent allies' damage by 25%.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_BOW X Y
    [item]
        x,y={X},{Y}
        image=items/bow-elven.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/bow-elven.png
            speaker=narrator
            message= _ "You found the Crystal Bow of the Hunter. Your damage and damage of adjacent own and allied Units as well is increased by 25 Percent."
            image=items/bow-elven.png
        [/message]
        [object]
            [effect]
                apply_to=new_ability
                [abilities]
                    [leadership]
                        id=crystal_bow
                        value=25
                        cumulative=no
                        name= _ "bow of the hunter"
                        description= _ "Crystal Bow of the Hunter: increases damage of self, adjacent own and allied units by 25 Percent. it is a non-cumulative leadership ability."
                        affect_self=yes
                        affect_allies=yes
                        affect_enemies=no
                        [affect_adjacent]
                            adjacent=n,ne,se,s,sw,nw
                        [/affect_adjacent]
                    [/leadership]
                [/abilities]
            [/effect]
            silent=yes
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Silver Necklace of Protection. Its bearer
# receives a 20% increase in fire, cold, and arcane resists.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_NECKLACE X Y
    [item]
        x,y={X},{Y}
        image=items/ankh-necklace.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/ankh-necklace.png
            speaker=narrator
            message= _ "You found the Silver Necklace of Protection. Its bearer receives a Circle of Protection, which grants a bonus of 20 percent to fire, cold and arcane resistance."
            image=items/ankh-necklace.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    fire=-20
                    cold=-20
                    arcane=-20
                [/resistance]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Diversion Creator. Its bearer
# receives a 20% increase in blade, impact, and pierce resists.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_TARGET X Y
    [item]
        x,y={X},{Y}
        image=items/archery-target-right.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/archery-target-right.png
            speaker=narrator
            message= _ "You found the magical Diversion Creator! Its bearer receives a distracting aura, which grants a bonus of 20 percent to blade, impact, and pierce resistance."
            image=items/archery-target-right.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    blade=-20
                    impact=-20
                    pierce=-20
                [/resistance]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Ice Armor. The bearer gets a 20% bonus to
# ice resistance.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_ICEARMOR X Y
    [item]
        x,y={X},{Y}
        image=items/armor.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/armor.png
            speaker=narrator
            message= _ "You found the legendary Ice Armor. Its bearer receives a bonus of 20 percent to cold resistance."
            image=items/armor.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    cold=-20
                [/resistance]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Fire Armor. Its bearer gets a 20% bonus to
# fire resistance.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_FIREARMOR X Y
    [item]
        x,y={X},{Y}
        image=items/armor-golden.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/armor-golden.png
            speaker=narrator
            message= _ "You found the legendary FireArmor. Its bearer receives a bonus of 20 percent to fire resistance."
            image=items/armor-golden.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    fire=-20
                [/resistance]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Spirit Staff. The bearer gets a 20% bonus to
# arcane resistance.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_SPIRITSTAFF X Y
    [item]
        x,y={X},{Y}
        image=items/staff.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/staff.png
            speaker=narrator
            message= _ "You found the legendary Spirit Staff. Its bearer receives a bonus of 20 percent to arcane resistance."
            image=items/staff.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    arcane=-20
                [/resistance]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Dragonbone Shield. The bearer gets a 20% bonus to
# blade resistance.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_BUCKLER X Y
    [item]
        x,y={X},{Y}
        image=items/buckler.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/buckler.png
            speaker=narrator
            message= _ "You found the incredible Dragonbone Shield. Its bearer receives a bonus of 20 percent to blade resistance."
            image=items/buckler.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    blade=-20
                [/resistance]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Barrel of Power. The bearer gets a 20% bonus to
# pierce resistance.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_BARREL X Y
    [item]
        x,y={X},{Y}
        image=items/barrel.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/barrel.png
            speaker=narrator
            message= _ "You found the mythical Barrel of Power. Its bearer receives a bonus of 20 percent to pierce resistance."
            image=items/barrel.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    pierce=-20
                [/resistance]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Dwarvish Plate. The bearer gets a 20% bonus to
# impact resistance.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_DUMMY X Y
    [item]
        x,y={X},{Y}
        image=items/dummy.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/dummy.png
            speaker=narrator
            message= _ "You found the Dwarvish Plate. Its bearer receives a bonus of 20 percent to impact resistance."
            image=items/dummy.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    impact=-20
                [/resistance]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places the Ring of Darkness. Enemies in the aura get a
# -25% reduction to damage.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_RINGDARKNESS X Y
    [item]
        x,y={X},{Y}
        image=items/ring-red.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [sound]
            name=magic-holy-1.ogg
        [/sound]
        [message]
            image=items/ring-red.png
            speaker=narrator
            message= _ "You found the Ring of Darkness. Every enemy unit within the dark aura that surrounds its bearer will suffer -25 percent on their attacks."
            image=items/ring-red.png
        [/message]

        [store_unit]
            [filter]
                side=1,2,3,4,5
                x={X}
                y={Y}
            [/filter]
            variable=bearer
        [/store_unit]

        [set_variable]
            name=bearer.halo
            value="dark-cleric-auras.png"
        [/set_variable]

        [unstore_unit]
            variable=bearer
        [/unstore_unit]

        [object]
            silent=yes
            [effect]
                apply_to=new_ability
                [abilities]
                    [leadership]
                        id=ringdarkness
                        value=-25
                        cumulative=no
                        name= _ "ring of darkness"
                        description= _ "Ring of Darkness makes all adjacent enemy units fight worse (-25% for attack)."
                        affect_self=no
                        affect_allies=no
                        affect_enemies=yes
                        [affect_adjacent]
                            adjacent=n,ne,se,s,sw,nw
                        [/affect_adjacent]
                    [/leadership]
                [/abilities]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places a chest with a magical ring. This ring raises
# it's owner's resistance in every category by 10%, and is very
# valueful.
# Usage: X Y are the coordinates where the chest should appear.
#--------------------------------------------------------------

#define SURVIVALX_CHEST_RESRING X Y
    [item]
        x,y={X},{Y}
        image=items/ring-white.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [message]
            image=items/ring-white.png
            speaker=narrator
            message= _ "You found a glowing little ring... This magical ring will increase your resistances."
            image=items/ring-white.png
        [/message]
        [object]
            silent=yes
            [effect]
                apply_to=resistance
                replace=no
                [resistance]
                    blade=-10
                    pierce=-10
                    impact=-10
                    fire=-10
                    cold=-10
                    arcane=-10
                [/resistance]
            [/effect]
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places a red potion.
# This potion just heals the finder to full health, and
# disappears after its use.
# Usage: X Y are the coordinates where the potion should appear.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_RED_HEALTH_POTION X Y
    [item]
        x,y={X},{Y}
        image=items/potion-red.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [message]
            image=items/potion-red.png
            speaker=narrator
            message= _ "You found a strange red potion. Drinking it makes you feel healthy. All your wounds have been cured!"
            image=wesnoth-icon.png
        [/message]
        [object]
            [effect]
                apply_to=status
                remove=poisoned
            [/effect]
            [effect]
                apply_to=status
                remove=slowed
            [/effect]
            [effect]
                apply_to=hitpoints
                heal_full=yes
                violate_maximum=yes
            [/effect]
            silent=yes
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# This places a yellow potion.
# This potion increases it's finder's max HP a little and
# doubles the finder's remaining HP. Note that this also
# increases them above the max! Placing a lot of them in
# a short distance to each other thus is no good idea.
# Any kind of healing will slowly drive them back to the normal
# max., any kind of AMLA or advancing will completely take away
# this bonus.
# Usage: X Y are the coordinates where the potion should appear.
#--------------------------------------------------------------
#define SURVIVALX_CHEST_SUPER_HEALTH_POTION X Y
    [item]
        x,y={X},{Y}
        image=items/potion-yellow.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={X},{Y}
            side=1,2,3,4,5
        [/filter]
        [removeitem]
        [/removeitem]
        [message]
            image=items/potion-yellow.png
            speaker=narrator
            message= _ "You found a strange yellow potion. Drinking it makes you feel more healthy. You've been healed, your max. HP have been increased and your current HP have been doubled!"
            image=wesnoth-icon.png
        [/message]
        [object]
            [effect]
                apply_to=status
                remove=poisoned
            [/effect]
            [effect]
                apply_to=status
                remove=slowed
            [/effect]
            [effect]
                apply_to=hitpoints
                increase_total=20
                violate_maximum=yes
            [/effect]
            [effect]
                apply_to=hitpoints
                heal_full=yes
                violate_maximum=yes
            [/effect]
            [effect]
                apply_to=hitpoints
                increase=100%
                violate_maximum=yes
            [/effect]
            silent=yes
        [/object]
    [/event]
#enddef

#--------------------------------------------------------------
# These macros define extra weapons only used for the creep
# macro below. They should not be used regularly.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_WEAPON_FORCE_SWORD DAM SRK
    [effect]
        apply_to=new_attack
        name= _ "Force Blade"
        icon=attacks/sword-human.png
        type=force
        range=melee
        damage={DAM}
        number={SRK}
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Force Blade"
            [/filter_attack]
            hits=no
            [frame]
                begin=-200
                end=-150
            [/frame]
            [frame]
                begin=-150
                end=100
                sound={SOUND_LIST:MISS}
            [/frame]
            [frame]
                begin=100
                end=200
            [/frame]
        [/attack_anim]
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Force Blade"
            [/filter_attack]
            hits=yes
            [frame]
                begin=-200
                end=-150
            [/frame]
            [frame]
                begin=-150
                end=100
                sound={SOUND_LIST:SWORD_SWISH}
            [/frame]
            [frame]
                begin=100
                end=200
            [/frame]
        [/attack_anim]
    [/effect]
#enddef

#define SURVIVALX_ENEMY_WEAPON_FORCE_PROJECTILE DAM SRK
    [effect]
        apply_to=new_attack
        name= _ "Force Projectile"
        icon=attacks/sling.png
        type=force
        range=ranged
        damage={DAM}
        number={SRK}
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Force Projectile"
            [/filter_attack]
            hits=no
            [missile_frame]
                begin=-150
                end=0
                image="projectiles/stone.png"
                image_diagonal="projectiles/stone.png"
            [/missile_frame]
            [frame]
                begin=-400
                end=-100
                sound=sling-miss.ogg
            [/frame]
            [frame]
                begin=-100
                end=50
            [/frame]
        [/attack_anim]
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Force Projectile"
            [/filter_attack]
            hits=yes
            [missile_frame]
                begin=-150
                end=0
                image="projectiles/stone.png"
                image_diagonal="projectiles/stone.png"
            [/missile_frame]
            [frame]
                begin=-400
                end=-100
                sound=sling.ogg
            [/frame]
            [frame]
                begin=-100
                end=50
            [/frame]
        [/attack_anim]
    [/effect]
#enddef

#define SURVIVALX_ENEMY_WEAPON_ENERGY_WAVE DAM SRK
    [effect]
        apply_to=new_attack
        name= _ "Energy Wave"
        icon=attacks/lightbeam.png
        type=arcane
        range=ranged
        damage={DAM}
        number={SRK}
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Energy Wave"
            [/filter_attack]
            [missile_frame]
                begin=-180
                end=0
                image="projectiles/whitemissile-n.png"
                image_diagonal="projectiles/whitemissile-ne.png"
                halo=halo/holy/white-mage-halo1.png,halo/holy/white-mage-halo2.png,halo/holy/white-mage-halo3.png,halo/holy/white-mage-halo4.png
            [/missile_frame]
            [frame]
                begin=-300
                end=-225
            [/frame]
            [frame]
                begin=-225
                end=-150
            [/frame]
            [frame]
                begin=-150
                end=-75
                halo=halo/holy/halo6.png
            [/frame]
            [if]
                hits=yes
                [frame]
                    begin=-75
                    end=0
                    sound={SOUND_LIST:HOLY}
                    halo=halo/holy/halo1.png
                [/frame]
            [/if]
            [else]
                hits=no
                [frame]
                    begin=-75
                    end=0
                    sound={SOUND_LIST:HOLY_MISS}
                    halo=halo/holy/halo1.png
                [/frame]
            [/else]
            [frame]
                begin=0
                end=75
                halo=halo/holy/halo3.png
            [/frame]
            [frame]
                begin=75
                end=150
                halo=halo/holy/halo5.png
            [/frame]
            [frame]
                begin=150
                end=200
                halo=halo/holy/halo6.png
            [/frame]
            [frame]
                begin=200
                end=250
            [/frame]
            [frame]
                begin=250
                end=300
            [/frame]
        [/attack_anim]
    [/effect]
#enddef

#define SURVIVALX_ENEMY_WEAPON_ICE_WAVE DAM SRK
    [effect]
        apply_to=new_attack
        name= _ "Ice Wave"
        icon=attacks/dark-missile.png
        type=cold
        range=ranged
        damage={DAM}
        number={SRK}
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Ice Wave"
            [/filter_attack]
            hits=yes
            [missile_frame]
                begin=-200
                end=0
                image="projectiles/darkmissile-n.png"
                image_diagonal="projectiles/darkmissile-ne.png"
            [/missile_frame]
            [frame]
                begin=-250
                end=-180
                sound=magic-dark.ogg
            [/frame]
            [frame]
                begin=-180
                end=-70
            [/frame]
        [/attack_anim]
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Ice Wave"
            [/filter_attack]
            hits=no
            [missile_frame]
                begin=-200
                end=0
                image="projectiles/darkmissile-n.png"
                image_diagonal="projectiles/darkmissile-ne.png"
            [/missile_frame]
            [frame]
                begin=-250
                end=-180
                sound=magic-dark-miss.ogg
            [/frame]
            [frame]
                begin=-130
                end=-70
            [/frame]
        [/attack_anim]
    [/effect]
#enddef

#define SURVIVALX_ENEMY_WEAPON_ENCHANTED_DAGGER DAM SRK
    [effect]
        apply_to=new_attack
        name= _ "Enchanted Dagger"
        icon=attacks/dagger-human.png
        type=arcane
        range=melee
        damage={DAM}
        number={SRK}
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Enchanted Dagger"
            [/filter_attack]
            hits=no
            [frame]
                begin=-150
                end=-100
            [/frame]
            [frame]
                begin=-100
                end=100
                sound={SOUND_LIST:MISS},{SOUND_LIST:HOLY_MISS}
            [/frame]
            [frame]
                begin=100
                end=150
            [/frame]
        [/attack_anim]
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Enchanted Dagger"
            [/filter_attack]
            hits=yes
            [frame]
                begin=-150
                end=-100
            [/frame]
            [frame]
                begin=-100
                end=100
                sound=dagger-swish.wav,{SOUND_LIST:HOLY}
            [/frame]
            [frame]
                begin=100
                end=150
            [/frame]
        [/attack_anim]
    [/effect]
#enddef

#define SURVIVALX_ENEMY_WEAPON_COLD_STEEL DAM SRK
    [effect]
        apply_to=new_attack
        name= _ "Cold Steel"
        icon=attacks/dagger-undead.png
        type=cold
        range=melee
        damage={DAM}
        number={SRK}
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Cold Steel"
            [/filter_attack]
            hits=no
            [frame]
                begin=-150
                end=-100
            [/frame]
            [frame]
                begin=-100
                end=100
                sound={SOUND_LIST:MISS}
            [/frame]
            [frame]
                begin=100
                end=150
            [/frame]
        [/attack_anim]
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Cold Steel"
            [/filter_attack]
            hits=yes
            [frame]
                begin=-150
                end=-100
            [/frame]
            [frame]
                begin=-100
                end=100
                sound=dagger-swish.wav
            [/frame]
            [frame]
                begin=100
                end=150
            [/frame]
        [/attack_anim]
    [/effect]
#enddef

#define SURVIVALX_ENEMY_WEAPON_BOW DAM SRK
    [effect]
        apply_to=new_attack
        name= _ "Bow"
        icon=attacks/bow.png
        type=pierce
        range=ranged
        damage={DAM}
        number={SRK}
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Bow"
            [/filter_attack]
            hits=no
            [missile_frame]
                begin=-150
                end=0
                image="projectiles/missile-n.png"
                image_diagonal="projectiles/missile-ne.png"
            [/missile_frame]
            [frame]
                begin=-375
                end=-300
                sound=bow-miss.ogg
            [/frame]
            [frame]
                begin=-300
                end=-225
            [/frame]
            [frame]
                begin=-225
                end=-150
            [/frame]
            [frame]
                begin=-150
                end=-75
            [/frame]
            [frame]
                begin=-75
                end=-20
            [/frame]
            [frame]
                begin=-20
                end=20
            [/frame]
        [/attack_anim]
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Bow"
            [/filter_attack]
            hits=yes
            [missile_frame]
                begin=-150
                end=0
                image="projectiles/missile-n.png"
                image_diagonal="projectiles/missile-ne.png"
            [/missile_frame]
            [frame]
                begin=-375
                end=-300
                sound=bow.ogg
            [/frame]
            [frame]
                begin=-300
                end=-225
            [/frame]
            [frame]
                begin=-225
                end=-150
            [/frame]
            [frame]
                begin=-150
                end=-75
            [/frame]
            [frame]
                begin=-75
                end=-20
            [/frame]
            [frame]
                begin=-20
                end=20
            [/frame]
        [/attack_anim]
    [/effect]
#enddef

#define SURVIVALX_ENEMY_WEAPON_FLAMING_DART DAM SRK
    [effect]
        apply_to=new_attack
        name= _ "Flaming Dart"
        icon=attacks/torch.png
        type=fire
        range=ranged
        damage={DAM}
        number={SRK}
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Flaming Dart"
            [/filter_attack]
            hits=no
            [missile_frame]
                begin=-150
                end=0
                image="projectiles/missile-fire-n.png"
                image_diagonal="projectiles/missile-fire-ne.png"
            [/missile_frame]
            [frame]
                begin=-400
                end=-350
                sound={SOUND_LIST:MISS}
            [/frame]
            [frame]
                begin=-350
                end=-300
            [/frame]
            [frame]
                begin=-300
                end=-250
            [/frame]
            [frame]
                begin=-250
                end=-100
            [/frame]
            [frame]
                begin=-100
                end=-50
            [/frame]
            [frame]
                begin=-50
                end=100
            [/frame]
        [/attack_anim]
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "Flaming Dart"
            [/filter_attack]
            hits=yes
            [missile_frame]
                begin=-150
                end=0
                image="projectiles/missile-fire-n.png"
                image_diagonal="projectiles/missile-fire-ne.png"
            [/missile_frame]
            [frame]
                begin=-400
                end=-350
                sound=dart.ogg
            [/frame]
            [frame]
                begin=-350
                end=-300
            [/frame]
            [frame]
                begin=-300
                end=-250
            [/frame]
            [frame]
                begin=-250
                end=-100
            [/frame]
            [frame]
                begin=-100
                end=-50
            [/frame]
            [frame]
                begin=-50
                end=100
            [/frame]
        [/attack_anim]
    [/effect]
#enddef

#define SURVIVALX_ENEMY_WEAPON_SLING DAM SRK
    [effect]
        apply_to=new_attack
        name= _ "sling"
        icon=attacks/sling.png
        type=impact
        range=ranged
        damage={DAM}
        number={SRK}
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "sling"
            [/filter_attack]
            hits=no
            [missile_frame]
                begin=-150
                end=0
                image="projectiles/stone.png"
                image_diagonal="projectiles/stone.png"
            [/missile_frame]
            [frame]
                begin=-400
                end=-100
                sound=sling-miss.ogg
            [/frame]
            [frame]
                begin=-100
                end=50
            [/frame]
        [/attack_anim]
    [/effect]
    [effect]
        apply_to=new_animation
        [attack_anim]
            [filter_attack]
                name=_ "sling"
            [/filter_attack]
            hits=yes
            [missile_frame]
                begin=-150
                end=0
                image="projectiles/stone.png"
                image_diagonal="projectiles/stone.png"
            [/missile_frame]
            [frame]
                begin=-400
                end=-100
                sound=sling.ogg
            [/frame]
            [frame]
                begin=-100
                end=50
            [/frame]
        [/attack_anim]
    [/effect]
#enddef

#--------------------------------------------------------------
# This event makes the enemy recruits progressively becoming
# tougher. This is a major element of SurvivalXtreme, and
# should be present at each of it's maps.
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_UPGRADE
    [event]
        name=recruit
        first_time_only=no
        [if]
            [variable]
                name=brutal
                greater_than_equal_to=125
            [/variable]
            [then]
                [filter]
                    x,y=$x1,$y1
                    side=6,7,8,9
                [/filter]
                [object]
                    silent=yes
                    {SURVIVALX_ENEMY_WEAPON_COLD_STEEL 8 1}
                    {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 8 1}
                    [effect]
                        apply_to=hitpoints
                        increase_total=2000%
                        heal_full=yes
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=1500%
                        duration=forever
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=ranged
                        increase_damage=1500%
                        duration=forever
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=no
                        [resistance]
                            blade=-40
                            pierce=-40
                            impact=-40
                            fire=-40
                            cold=-40
                            arcane=-40
                        [/resistance]
                    [/effect]
                [/object]
            [/then]
            [else]
                [if]
                    [variable]
                        name=brutal
                        greater_than_equal_to=100
                    [/variable]
                    [then]
                        [filter]
                            x,y=$x1,$y1
                            side=6,7,8,9
                        [/filter]
                        [object]
                            silent=yes
                            {SURVIVALX_ENEMY_WEAPON_ENCHANTED_DAGGER 7 1}
                            {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 7 1}
                            [effect]
                                apply_to=hitpoints
                                increase_total=1750%
                                heal_full=yes
                            [/effect]
                            [effect]
                                apply_to=attack
                                range=melee
                                increase_damage=950%
                                duration=forever
                            [/effect]
                            [effect]
                                apply_to=attack
                                range=ranged
                                increase_damage=950%
                                duration=forever
                            [/effect]
                            [effect]
                                apply_to=resistance
                                replace=no
                                [resistance]
                                    blade=-30
                                    pierce=-30
                                    impact=-30
                                    fire=-30
                                    cold=-30
                                    arcane=-30
                                [/resistance]
                            [/effect]
                        [/object]
                    [/then]
                    [else]
                        [if]
                            [variable]
                                name=brutal
                                greater_than_equal_to=90
                            [/variable]
                            [then]
                                [filter]
                                    x,y=$x1,$y1
                                    side=6,7,8,9
                                [/filter]
                                [object]
                                    silent=yes
                                    {SURVIVALX_ENEMY_WEAPON_ENCHANTED_DAGGER 6 1}
                                    {SURVIVALX_ENEMY_WEAPON_SLING 6 1}
                                    [effect]
                                        apply_to=hitpoints
                                        increase_total=1300%
                                        heal_full=yes
                                    [/effect]
                                    [effect]
                                        apply_to=attack
                                        range=melee
                                        increase_damage=700%
                                        duration=forever
                                    [/effect]
                                    [effect]
                                        apply_to=attack
                                        range=ranged
                                        increase_damage=700%
                                        duration=forever
                                    [/effect]
                                    [effect]
                                        apply_to=resistance
                                        replace=no
                                        [resistance]
                                            blade=-30
                                            pierce=-30
                                            impact=-30
                                            fire=-30
                                            cold=-30
                                            arcane=-30
                                        [/resistance]
                                    [/effect]
                                [/object]
                            [/then]
                            [else]
                                [if]
                                    [variable]
                                        name=brutal
                                        greater_than_equal_to=80
                                    [/variable]
                                    [then]
                                        [filter]
                                            x,y=$x1,$y1
                                            side=6,7,8,9
                                        [/filter]
                                        [object]
                                            silent=yes
                                            {SURVIVALX_ENEMY_WEAPON_COLD_STEEL 6 1}
                                            {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 6 1}
                                            [effect]
                                                apply_to=hitpoints
                                                increase_total=1000%
                                                heal_full=yes
                                            [/effect]
                                            [effect]
                                                apply_to=attack
                                                range=melee
                                                increase_damage=500%
                                                duration=forever
                                            [/effect]
                                            [effect]
                                                apply_to=attack
                                                range=ranged
                                                increase_damage=500%
                                                duration=forever
                                            [/effect]
                                            [effect]
                                                apply_to=resistance
                                                replace=no
                                                [resistance]
                                                    blade=-30
                                                    pierce=-30
                                                    impact=-30
                                                    fire=-30
                                                    cold=-30
                                                    arcane=-30
                                                [/resistance]
                                            [/effect]
                                        [/object]
                                    [/then]
                                    [else]
                                        [if]
                                            [variable]
                                                name=brutal
                                                greater_than_equal_to=70
                                            [/variable]
                                            [then]
                                                [filter]
                                                    x,y=$x1,$y1
                                                    side=6,7,8,9
                                                [/filter]
                                                [object]
                                                    silent=yes
                                                    {SURVIVALX_ENEMY_WEAPON_COLD_STEEL 5 1}
                                                    {SURVIVALX_ENEMY_WEAPON_SLING 5 1}
                                                    [effect]
                                                        apply_to=hitpoints
                                                        increase_total=720%
                                                        heal_full=yes
                                                    [/effect]
                                                    [effect]
                                                        apply_to=attack
                                                        range=melee
                                                        increase_damage=350%
                                                        duration=forever
                                                    [/effect]
                                                    [effect]
                                                        apply_to=attack
                                                        range=ranged
                                                        increase_damage=350%
                                                        duration=forever
                                                    [/effect]
                                                    [effect]
                                                        apply_to=resistance
                                                        replace=no
                                                        [resistance]
                                                            blade=-20
                                                            pierce=-20
                                                            impact=-20
                                                            fire=-20
                                                            cold=-20
                                                            arcane=-20
                                                        [/resistance]
                                                    [/effect]
                                                [/object]
                                            [/then]
                                            [else]
                                                [if]
                                                    [variable]
                                                        name=brutal
                                                        greater_than_equal_to=60
                                                    [/variable]
                                                    [then]
                                                        [filter]
                                                            x,y=$x1,$y1
                                                            side=6,7,8,9
                                                        [/filter]
                                                        [object]
                                                            silent=yes
                                                            {SURVIVALX_ENEMY_WEAPON_ENCHANTED_DAGGER 5 1}
                                                            {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 5 1}
                                                            [effect]
                                                                apply_to=hitpoints
                                                                increase_total=530%
                                                                heal_full=yes
                                                            [/effect]
                                                            [effect]
                                                                apply_to=attack
                                                                range=melee
                                                                increase_damage=240%
                                                                duration=forever
                                                            [/effect]
                                                            [effect]
                                                                apply_to=attack
                                                                range=ranged
                                                                increase_damage=240%
                                                                duration=forever
                                                            [/effect]
                                                            [effect]
                                                                apply_to=resistance
                                                                replace=no
                                                                [resistance]
                                                                    blade=-20
                                                                    pierce=-20
                                                                    impact=-20
                                                                    fire=-20
                                                                    cold=-20
                                                                    arcane=-20
                                                                [/resistance]
                                                            [/effect]
                                                        [/object]
                                                    [/then]
                                                    [else]
                                                        [if]
                                                            [variable]
                                                                name=brutal
                                                                greater_than_equal_to=50
                                                            [/variable]
                                                            [then]
                                                                [filter]
                                                                    x,y=$x1,$y1
                                                                    side=6,7,8,9
                                                                [/filter]
                                                                [object]
                                                                    silent=yes
                                                                    {SURVIVALX_ENEMY_WEAPON_ENCHANTED_DAGGER 4 1}
                                                                    {SURVIVALX_ENEMY_WEAPON_SLING 4 1}
                                                                    [effect]
                                                                        apply_to=hitpoints
                                                                        increase_total=350%
                                                                        heal_full=yes
                                                                    [/effect]
                                                                    [effect]
                                                                        apply_to=attack
                                                                        range=melee
                                                                        increase_damage=150%
                                                                        duration=forever
                                                                    [/effect]
                                                                    [effect]
                                                                        apply_to=attack
                                                                        range=ranged
                                                                        increase_damage=150%
                                                                        duration=forever
                                                                    [/effect]
                                                                    [effect]
                                                                        apply_to=resistance
                                                                        replace=no
                                                                        [resistance]
                                                                            blade=-20
                                                                            pierce=-20
                                                                            impact=-20
                                                                            fire=-20
                                                                            cold=-20
                                                                            arcane=-20
                                                                        [/resistance]
                                                                    [/effect]
                                                                [/object]
                                                            [/then]
                                                            [else]
                                                                [if]
                                                                    [variable]
                                                                        name=brutal
                                                                        greater_than_equal_to=40
                                                                    [/variable]
                                                                    [then]
                                                                        [filter]
                                                                            x,y=$x1,$y1
                                                                            side=6,7,8,9
                                                                        [/filter]
                                                                        [object]
                                                                            silent=yes
                                                                            {SURVIVALX_ENEMY_WEAPON_COLD_STEEL 4 1}
                                                                            {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 4 1}
                                                                            [effect]
                                                                                apply_to=hitpoints
                                                                                increase_total=240%
                                                                                heal_full=yes
                                                                            [/effect]
                                                                            [effect]
                                                                                apply_to=attack
                                                                                range=melee
                                                                                increase_damage=100%
                                                                                duration=forever
                                                                            [/effect]
                                                                            [effect]
                                                                                apply_to=attack
                                                                                range=ranged
                                                                                increase_damage=100%
                                                                                duration=forever
                                                                            [/effect]
                                                                            [effect]
                                                                                apply_to=resistance
                                                                                replace=no
                                                                                [resistance]
                                                                                    blade=-10
                                                                                    pierce=-10
                                                                                    impact=-10
                                                                                    fire=-10
                                                                                    cold=-10
                                                                                    arcane=-10
                                                                                [/resistance]
                                                                            [/effect]
                                                                        [/object]
                                                                    [/then]
                                                                    [else]
                                                                        [if]
                                                                            [variable]
                                                                                name=brutal
                                                                                greater_than_equal_to=30
                                                                            [/variable]
                                                                            [then]
                                                                                [filter]
                                                                                    x,y=$x1,$y1
                                                                                    side=6,7,8,9
                                                                                [/filter]
                                                                                [object]
                                                                                    silent=yes
                                                                                    {SURVIVALX_ENEMY_WEAPON_COLD_STEEL 3 1}
                                                                                    {SURVIVALX_ENEMY_WEAPON_SLING 3 1}
                                                                                    [effect]
                                                                                        apply_to=hitpoints
                                                                                        increase_total=130%
                                                                                        heal_full=yes
                                                                                    [/effect]
                                                                                    [effect]
                                                                                        apply_to=attack
                                                                                        range=melee
                                                                                        increase_damage=70%
                                                                                        duration=forever
                                                                                    [/effect]
                                                                                    [effect]
                                                                                        apply_to=attack
                                                                                        range=ranged
                                                                                        increase_damage=70%
                                                                                        duration=forever
                                                                                    [/effect]
                                                                                    [effect]
                                                                                        apply_to=resistance
                                                                                        replace=no
                                                                                        [resistance]
                                                                                            blade=-10
                                                                                            pierce=-10
                                                                                            impact=-10
                                                                                            fire=-10
                                                                                            cold=-10
                                                                                            arcane=-10
                                                                                        [/resistance]
                                                                                    [/effect]
                                                                                [/object]
                                                                            [/then]
                                                                            [else]
                                                                                [if]
                                                                                    [variable]
                                                                                        name=brutal
                                                                                        greater_than_equal_to=20
                                                                                    [/variable]
                                                                                    [then]
                                                                                        [filter]
                                                                                            x,y=$x1,$y1
                                                                                            side=6,7,8,9
                                                                                        [/filter]
                                                                                        [object]
                                                                                            silent=yes
                                                                                            {SURVIVALX_ENEMY_WEAPON_ENCHANTED_DAGGER 3 1}
                                                                                            {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 3 1}
                                                                                            [effect]
                                                                                                apply_to=hitpoints
                                                                                                increase_total=60%
                                                                                                heal_full=yes
                                                                                            [/effect]
                                                                                            [effect]
                                                                                                apply_to=attack
                                                                                                range=melee
                                                                                                increase_damage=35%
                                                                                                duration=forever
                                                                                            [/effect]
                                                                                            [effect]
                                                                                                apply_to=attack
                                                                                                range=ranged
                                                                                                increase_damage=35%
                                                                                                duration=forever
                                                                                            [/effect]
                                                                                        [/object]
                                                                                    [/then]
                                                                                    [else]
                                                                                        [if]
                                                                                            [variable]
                                                                                                name=brutal
                                                                                                greater_than_equal_to=10
                                                                                            [/variable]
                                                                                            [then]
                                                                                                [filter]
                                                                                                    x,y=$x1,$y1
                                                                                                    side=6,7,8,9
                                                                                                [/filter]
                                                                                                [object]
                                                                                                    silent=yes
                                                                                                    [effect]
                                                                                                        apply_to=hitpoints
                                                                                                        increase_total=30%
                                                                                                        heal_full=yes
                                                                                                    [/effect]
                                                                                                    [effect]
                                                                                                        apply_to=attack
                                                                                                        range=melee
                                                                                                        increase_damage=20%
                                                                                                        duration=forever
                                                                                                    [/effect]
                                                                                                    [effect]
                                                                                                        apply_to=attack
                                                                                                        range=ranged
                                                                                                        increase_damage=20%
                                                                                                        duration=forever
                                                                                                    [/effect]
                                                                                                [/object]
                                                                                            [/then]
                                                                                            [else]
                                                                                                [if]
                                                                                                    [variable]
                                                                                                        name=brutal
                                                                                                        greater_than_equal_to=0
                                                                                                    [/variable]
                                                                                                    [then]
                                                                                                        [filter]
                                                                                                            x,y=$x1,$y1
                                                                                                            side=6,7,8,9
                                                                                                        [/filter]
                                                                                                        [object]
                                                                                                            silent=yes
                                                                                                        [/object]
                                                                                                    [/then]
                                                                                                [/if]
                                                                                            [/else]
                                                                                        [/if]
                                                                                    [/else]
                                                                                [/if]
                                                                            [/else]
                                                                        [/if]
                                                                    [/else]
                                                                [/if]
                                                            [/else]
                                                        [/if]
                                                    [/else]
                                                [/if]
                                            [/else]
                                        [/if]
                                    [/else]
                                [/if]
                            [/else]
                        [/if]
                    [/else]
                [/if]
            [/else]
        [/if]
    [/event]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        ai_special=guardian
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_A X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_B X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_SLING 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_C X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_COLD_STEEL 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_D X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_COLD_STEEL 10 10}
                {SURVIVALX_ENEMY_WEAPON_SLING 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_E X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_ENCHANTED_DAGGER 10 10}
                {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_F X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_FORCE_SWORD 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_G X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_FORCE_PROJECTILE 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_H X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_FORCE_SWORD 10 10}
                {SURVIVALX_ENEMY_WEAPON_FORCE_PROJECTILE 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_I X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_BOW 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_J X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_ENERGY_WAVE 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_GUARD_K X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_ICE_WAVE 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_A X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_B X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_SLING 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_C X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_COLD_STEEL 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_D X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_COLD_STEEL 10 10}
                {SURVIVALX_ENEMY_WEAPON_SLING 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_E X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_ENCHANTED_DAGGER 10 10}
                {SURVIVALX_ENEMY_WEAPON_FLAMING_DART 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_F X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_FORCE_SWORD 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_G X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_FORCE_PROJECTILE 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_H X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_FORCE_SWORD 10 10}
                {SURVIVALX_ENEMY_WEAPON_FORCE_PROJECTILE 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_I X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_BOW 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_J X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_ENERGY_WAVE 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_K X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                {SURVIVALX_ENEMY_WEAPON_ICE_WAVE 10 10}
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It can't move and is undead. Must be
# used inside an (event)-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_UNDEAD_GUARD X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_UNDEAD}
            [object]
                silent=yes
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
                [effect]
                    apply_to=movement_costs
                    replace=yes
                    [movement_costs]
                        deep_water=100
                        shallow_water=100
                        swamp_water=100
                        flat=100
                        sand=100
                        forest=100
                        hills=100
                        mountains=100
                        village=100
                        castle=100
                        cave=100
                        frozen=100
                        unwalkable=100
                        impassable=100
                        fungus=100
                    [/movement_costs]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy unit called 'Boss' and allows you
# to alter it's stats. It moves around as usual and is undead.
# Must be used inside an (event)-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_UNDEAD X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        side={SIDE}
        role=boss
        {IS_HERO}
        id=Boss
        name=~Boss
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_UNDEAD}
            [object]
                silent=yes
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro places an enemy leader and allows you to alter
# it's stats. There is no variant for undead ones, though.
# Must be used inside an event-tag.
# Usage: X Y are the coordinates where the guard should appear.
#        TYPE is the type of unit you want the enemy to be.
#        SIDE is the side the unit should belong to.
#        MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_LEADER X Y TYPE SIDE MP HP MA MD RA RD RES
    [unit]
        x={X}
        y={Y}
        type={TYPE}
        canrecruit=yes
        side={SIDE}
        role=boss
        generate_name=yes
        unrenamable=yes
        [modifications]
            {TRAIT_LOYAL}
            {TRAIT_FEARLESS}
            [object]
                silent=yes
                [effect]
                    apply_to=movement
                    increase={MP}
                [/effect]
                [effect]
                    apply_to=hitpoints
                    increase={HP}
                    increase_total={HP}
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_attacks={MA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=melee
                    increase_damage={MD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_attacks={RA}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=attack
                    range=ranged
                    increase_damage={RD}
                    duration=forever
                [/effect]
                [effect]
                    apply_to=resistance
                    replace=no
                    [resistance]
                        blade=-{RES}
                        pierce=-{RES}
                        impact=-{RES}
                        fire=-{RES}
                        cold=-{RES}
                        arcane=-{RES}
                    [/resistance]
                [/effect]
            [/object]
        [/modifications]
    [/unit]
#enddef

#--------------------------------------------------------------
# This macro modifies a starting leader's stats. To use it,
# put it into the side tag of the side to modify, and then into
# an modifications- and object-tag.
# Usage: MP is the extra amount of MP for this unit.
#        HP is the extra amount of HP for this unit.
#        MA is the extra amount of melee strikes for this unit.
#        MD is the extra amount of melee damage for this unit.
#        RA is the extra amount of ranged strikes for this unit.
#        RD is the extra amount of ranged damage for this unit.
#        RES is the extra amount of resistance to all damage
#        types for this unit in percent.
#--------------------------------------------------------------
#define SURVIVALX_ENEMY_MODIFICATION MP HP MA MD RA RD RES
    [effect]
        apply_to=movement
        increase={MP}
    [/effect]
    [effect]
        apply_to=hitpoints
        increase={HP}
        increase_total={HP}
    [/effect]
    [effect]
        apply_to=attack
        range=melee
        increase_attacks={MA}
        duration=forever
    [/effect]
    [effect]
        apply_to=attack
        range=melee
        increase_damage={MD}
        duration=forever
    [/effect]
    [effect]
        apply_to=attack
        range=ranged
        increase_attacks={RA}
        duration=forever
    [/effect]
    [effect]
        apply_to=attack
        range=ranged
        increase_damage={RD}
        duration=forever
    [/effect]
    [effect]
        apply_to=resistance
        replace=no
        [resistance]
            blade=-{RES}
            pierce=-{RES}
            impact=-{RES}
            fire=-{RES}
            cold=-{RES}
            arcane=-{RES}
        [/resistance]
    [/effect]
#enddef

#--------------------------------------------------------------
# This macro handles a player's death. It displays a death
# message and makes that player drop all of his money in form
# of a chest. It also gives all creep leaders a gold and
# strength bonus. That means, if 5 players play and 4 players
# die, the remaining player would have to fight creeps that
# have a strength like the game already took 16 turns longer.
# That means, ouch.
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#--------------------------------------------------------------
#define SURVIVALX_DEATH_MESSAGES
    [event]
        name=die
        [filter]
            side=1
            canrecruit=yes
        [/filter]
        [message]
            speaker=unit
            message= _ "Argh... I guess that was my last adventure..."
        [/message]
        [store_gold]
            side=1
            variable=gold_die_1
        [/store_gold]
        [if]
            [variable]
                name=gold_die_1
                greater_than_equal_to=1
            [/variable]
            [then]
                {VARIABLE gold_die_chest_1 $gold_die_1}
                {VARIABLE chest1_x $x1}
                {VARIABLE chest1_y $y1}
                {SURVIVALX_CHEST_DEATH_GOLD $chest1_x $chest1_y $gold_die_chest_1}
            [/then]
        [/if]
        [gold]
            amount=-$gold_die_1
            side=1
        [/gold]
        [gold]
            side=6
            amount=125
        [/gold]
        [gold]
            side=7
            amount=125
        [/gold]
        [gold]
            side=8
            amount=125
        [/gold]
        [gold]
            side=9
            amount=125
        [/gold]
        {VARIABLE_OP brutal add 4}
        {SURVIVALX_MODIFY_INCOME 1 -2}
    [/event]
    [event]
        name=die
        [filter]
            side=2
            canrecruit=yes
        [/filter]
        [message]
            speaker=unit
            message= _ "This cannot be..."
        [/message]
        [store_gold]
            side=2
            variable=gold_die_2
        [/store_gold]
        [if]
            [variable]
                name=gold_die_2
                greater_than_equal_to=1
            [/variable]
            [then]
                {VARIABLE gold_die_chest_2 $gold_die_2}
                {VARIABLE chest2_x $x1}
                {VARIABLE chest2_y $y1}
                {SURVIVALX_CHEST_DEATH_GOLD $chest2_x $chest2_y $gold_die_chest_2}
            [/then]
        [/if]
        [gold]
            amount=-$gold_die_2
            side=2
        [/gold]
        [gold]
            side=6
            amount=125
        [/gold]
        [gold]
            side=7
            amount=125
        [/gold]
        [gold]
            side=8
            amount=125
        [/gold]
        [gold]
            side=9
            amount=125
        [/gold]
        {VARIABLE_OP brutal add 4}
        {SURVIVALX_MODIFY_INCOME 2 -2}
    [/event]
    [event]
        name=die
        [filter]
            side=3
            canrecruit=yes
        [/filter]
        [message]
            speaker=unit
            message= _ "I'm... dying..."
        [/message]
        [store_gold]
            side=3
            variable=gold_die_3
        [/store_gold]
        [if]
            [variable]
                name=gold_die_3
                greater_than_equal_to=1
            [/variable]
            [then]
                {VARIABLE gold_die_chest_3 $gold_die_3}
                {VARIABLE chest3_x $x1}
                {VARIABLE chest3_y $y1}
                {SURVIVALX_CHEST_DEATH_GOLD $chest3_x $chest3_y $gold_die_chest_3}
            [/then]
        [/if]
        [gold]
            amount=-$gold_die_3
            side=3
        [/gold]
        [gold]
            side=6
            amount=125
        [/gold]
        [gold]
            side=7
            amount=125
        [/gold]
        [gold]
            side=8
            amount=125
        [/gold]
        [gold]
            side=9
            amount=125
        [/gold]
        {VARIABLE_OP brutal add 4}
        {SURVIVALX_MODIFY_INCOME 3 -2}
    [/event]
    [event]
        name=die
        [filter]
            side=4
            canrecruit=yes
        [/filter]
        [message]
            speaker=unit
            message= _ "Urgh. I should never have come here..."
        [/message]
        [store_gold]
            side=4
            variable=gold_die_4
        [/store_gold]
        [if]
            [variable]
                name=gold_die_4
                greater_than_equal_to=1
            [/variable]
            [then]
                {VARIABLE gold_die_chest_4 $gold_die_4}
                {VARIABLE chest4_x $x1}
                {VARIABLE chest4_y $y1}
                {SURVIVALX_CHEST_DEATH_GOLD $chest4_x $chest4_y $gold_die_chest_4}
            [/then]
        [/if]
        [gold]
            amount=-$gold_die_4
            side=4
        [/gold]
        [gold]
            side=6
            amount=125
        [/gold]
        [gold]
            side=7
            amount=125
        [/gold]
        [gold]
            side=8
            amount=125
        [/gold]
        [gold]
            side=9
            amount=125
        [/gold]
        {VARIABLE_OP brutal add 4}
        {SURVIVALX_MODIFY_INCOME 4 -2}
    [/event]
    [event]
        name=die
        [filter]
            side=5
            canrecruit=yes
        [/filter]
        [message]
            speaker=unit
            message= _ "Argh. I'm done for."
        [/message]
        [store_gold]
            side=5
            variable=gold_die_5
        [/store_gold]
        [if]
            [variable]
                name=gold_die_5
                greater_than_equal_to=1
            [/variable]
            [then]
                {VARIABLE gold_die_chest_5 $gold_die_5}
                {VARIABLE chest5_x $x1}
                {VARIABLE chest5_y $y1}
                {SURVIVALX_CHEST_DEATH_GOLD $chest5_x $chest5_y $gold_die_chest_5}
            [/then]
        [/if]
        [gold]
            amount=-$gold_die_5
            side=5
        [/gold]
        [gold]
            side=6
            amount=125
        [/gold]
        [gold]
            side=7
            amount=125
        [/gold]
        [gold]
            side=8
            amount=125
        [/gold]
        [gold]
            side=9
            amount=125
        [/gold]
        {VARIABLE_OP brutal add 4}
        {SURVIVALX_MODIFY_INCOME 5 -2}
    [/event]
#enddef

#--------------------------------------------------------------
# This macro is used for the macro below only, and reduces the
# the amount of lines needed to define it.
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#--------------------------------------------------------------
#define SURVIVALX_MUSIC FILE
    [music]
        name={FILE}
        ms_before=12000
        append=yes
    [/music]
#enddef

#--------------------------------------------------------------
# This macro defines which music is played while playing the
# scenario. It isn't really necessary for SurvivalXtreme, but
# adds a nice flare. You can merely leave this macro out if you
# want and use the default playlist instead.
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#--------------------------------------------------------------
#define SURVIVALX_MUSIC_PLAYLIST
    {SURVIVALX_MUSIC knolls.ogg}
    {SURVIVALX_MUSIC wanderer.ogg}
    {SURVIVALX_MUSIC battle.ogg}
    {SURVIVALX_MUSIC main_menu.ogg}
    {SURVIVALX_MUSIC revelation.ogg}
    {SURVIVALX_MUSIC loyalists.ogg}
    {SURVIVALX_MUSIC northerners.ogg}
    {SURVIVALX_MUSIC underground.ogg}
    {SURVIVALX_MUSIC frantic.ogg}
    {SURVIVALX_MUSIC knalgan_theme.ogg}
    [event]
        name=prestart
        {SURVIVALX_MUSIC knolls.ogg}
        {SURVIVALX_MUSIC wanderer.ogg}
        {SURVIVALX_MUSIC battle.ogg}
        {SURVIVALX_MUSIC main_menu.ogg}
        {SURVIVALX_MUSIC revelation.ogg}
        {SURVIVALX_MUSIC loyalists.ogg}
        {SURVIVALX_MUSIC northerners.ogg}
        {SURVIVALX_MUSIC underground.ogg}
        {SURVIVALX_MUSIC frantic.ogg}
        {SURVIVALX_MUSIC knalgan_theme.ogg}
    [/event]
#enddef

#--------------------------------------------------------------
# This macro handles an enemy's death. It gives gold to all
# players depending on the dead unit's level and status and
# allows the killer to move and attack again.
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#--------------------------------------------------------------
#define SURVIVALX_KILL
    [event]
        name=prestart
        {VARIABLE killbonus_0_0 5}
        {VARIABLE killbonus_0_1 10}
        {VARIABLE killbonus_0_2 15}
        {VARIABLE killbonus_0_3 20}
        {VARIABLE killbonus_0_4 25}
        {VARIABLE killbonus_0_5 30}
        {VARIABLE killbonus_1_0 10}
        {VARIABLE killbonus_1_1 20}
        {VARIABLE killbonus_1_2 30}
        {VARIABLE killbonus_1_3 40}
        {VARIABLE killbonus_1_4 50}
        {VARIABLE killbonus_1_5 60}
        {VARIABLE killbonus_2_0 15}
        {VARIABLE killbonus_2_1 30}
        {VARIABLE killbonus_2_2 45}
        {VARIABLE killbonus_2_3 60}
        {VARIABLE killbonus_2_4 75}
        {VARIABLE killbonus_2_5 90}
    [/event]

    [event]
        name=die
        first_time_only=no
        [filter_second]
            side=1,2,3,4,5
        [/filter_second]

        [store_unit]
            variable=victim
            [filter]
                x,y=$x1,$y1
            [/filter]
        [/store_unit]

        [if]
            [variable]
                name=victim.canrecruit
                equals=1
            [/variable]
            [then]
                {VARIABLE isHero 2}
            [/then]
            [else]
                [if]
                    [variable]
                        name=victim.id
                        equals=Boss
                    [/variable]
                    [then]
                        {VARIABLE isHero 1}
                    [/then]
                    [else]
                        {VARIABLE isHero 0}
                    [/else]
                [/if]
            [/else]
        [/if]

        [set_variable]
            name=bonus
            format=$killbonus_$isHero|_$victim.level
        [/set_variable]
        {CLEAR_VARIABLE victim}

        [store_unit]
            [filter]
                x=$x2
                y=$y2
            [/filter]
            variable=killer
        [/store_unit]

        {VARIABLE killer_movement_side $killer.side}

        [if]
            [have_unit]
                side=1
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=1
                    amount=$bonus
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=2
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=2
                    amount=$bonus
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=3
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=3
                    amount=$bonus
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=4
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=4
                    amount=$bonus
                [/gold]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=5
                canrecruit=yes
            [/have_unit]
            [then]
                [gold]
                    side=5
                    amount=$bonus
                [/gold]
            [/then]
        [/if]

        {VARIABLE killer.moves 4}
        {VARIABLE killer.attacks_left 1}

        [unstore_unit]
            variable=killer
            text=$bonus
            red,green,blue=255,255,0
        [/unstore_unit]
        [store_unit]
            [filter]
                side=1
                canrecruit=yes
            [/filter]
            variable=killer_leader_1
        [/store_unit]
        [unstore_unit]
            variable=killer_leader_1
            text=$bonus
            red,green,blue=255,255,0
        [/unstore_unit]
        [store_unit]
            [filter]
                side=2
                canrecruit=yes
            [/filter]
            variable=killer_leader_2
        [/store_unit]
        [unstore_unit]
            variable=killer_leader_2
            text=$bonus
            red,green,blue=255,255,0
        [/unstore_unit]
        [store_unit]
            [filter]
                side=3
                canrecruit=yes
            [/filter]
            variable=killer_leader_3
        [/store_unit]
        [unstore_unit]
            variable=killer_leader_3
            text=$bonus
            red,green,blue=255,255,0
        [/unstore_unit]
        [store_unit]
            [filter]
                side=4
                canrecruit=yes
            [/filter]
            variable=killer_leader_4
        [/store_unit]
        [unstore_unit]
            variable=killer_leader_4
            text=$bonus
            red,green,blue=255,255,0
        [/unstore_unit]
        [store_unit]
            [filter]
                side=5
                canrecruit=yes
            [/filter]
            variable=killer_leader_5
        [/store_unit]
        [unstore_unit]
            variable=killer_leader_5
            text=$bonus
            red,green,blue=255,255,0
        [/unstore_unit]
        [sound]
            name=gold.ogg
        [/sound]

        {CLEAR_VARIABLE killer}
        {CLEAR_VARIABLE killer_leader_1}
        {CLEAR_VARIABLE killer_leader_2}
        {CLEAR_VARIABLE killer_leader_3}
        {CLEAR_VARIABLE killer_leader_4}
        {CLEAR_VARIABLE killer_leader_5}
    [/event]
#enddef

#--------------------------------------------------------------
# This macro allows you to introduce the players' sides. It
# doesn't have any special function, it just saves time.
# Usage: SIDE is the side you want to introduce.
#        GOLD is the basic amount of gold the side starts with.
# Note: Don't use this macro if you want the players to be able
#       to fight each other.
#--------------------------------------------------------------
#define SURVIVALX_PLAYER_SIDE SIDE GOLD
    [side]
        side={SIDE}
        team_name=1
        canrecruit=yes
        controller=human
        income=-2
        village_gold=0
        gold={GOLD}
        income_lock=true
        team_lock=true
        fog=yes
        shroud=yes
        [ai]
            aggression=1.0
            caution=1.0
        [/ai]
    [/side]
#enddef

#--------------------------------------------------------------
# This macro changes a given terrain at any time. Must be used
# inside an event-tag.
# Usage: X Y are the location of the terrain to change.
#        LETTER is the letter of the terrain you want to use.
#--------------------------------------------------------------
#define SURVIVALX_SET_TERRAIN X Y LETTER
    [terrain]
        x="{X}"
        y="{Y}"
        terrain={LETTER}
    [/terrain]
#enddef

#--------------------------------------------------------------
# This macro modifies a side's income. Should be used for
# enemy sides only. Must be used inside an event-tag.
# Usage: SIDE is the side you want to modify.
#        INCOME is the amount of income you want the side to
#        have. Note that the game adds 2 to this value.
#--------------------------------------------------------------
#define SURVIVALX_MODIFY_INCOME SIDE INCOME
    [modify_side]
        side={SIDE}
        income={INCOME}
    [/modify_side]
#enddef

#--------------------------------------------------------------
# The following macros allow the enemy leaders to recruit more
# powerful creeps. Must be used inside an event-tag.
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#--------------------------------------------------------------
#define SURVIVALX_FIRST_ARM_BUFF
    [allow_recruit]
        side=9
        type=Kalifa Arif,Kalifa Ekim Haram,Kalifa Ghazi,Kalifa Ghaznid,Kalifa Ghulam al Rami,Kalifa Mamluk,Kalifa Mubarizan,Kalifa Naffatun,Kalifa Rami al Nuri
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Dark Elf Captain,Dark Elf Lizard Master,Dark Elf Lord,Dark Elf Shadow,Dark Elf Sorcerer,Dark Elf Sorceress,Dark Elf Warrior,Frost Wyrm,Mistral Wyrm
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=Chaos Daemon,Chaos Armorer,Greater Mutation,Chaos Flesh Hound,Chaos Rabid Hound,Chaos Knight,Chaos Magus,Chaos Marauder,Winged Daemon
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Steppe Bladesman,Steppe Flanker,Steppe Drover,Steppe Juggernaut,Steppe Outcast,Steppe Savage,Steppe Spearman,Steppe Striker,Steppe Vanguard
    [/allow_recruit]
#enddef

#define SURVIVALX_SECOND_ARM_BUFF
    [allow_recruit]
        side=9
        type=Kalifa Elite Ghazi,Kalifa Immortal,Kalifa Life Guard
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Dark Elf Cleric,Dark Elf Corsair,Dark Elf High Lord,Dark Elf Marshal,Dark Elf Stalker,Dark Elf Warlock,Boreal Wyrm,Rime Wyrm
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=Abomination,Chaos Blood Knight,Chaos Demonologist,Greater Daemon,Chaos Elite Armorer,Chaos Warp Hound,Chaos Overlord,Chaos Soulhunter
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Steppe Master,Steppe Khan,Steppe Massif,Steppe Pariah,Steppe Skewer
    [/allow_recruit]
#enddef

#define SURVIVALX_THIRD_ARM_BUFF
    [disallow_recruit]
        side=9
        type=Kalifa Ahadath,Kalifa Amir,Kalifa Ekim,Kalifa Ghulam,Kalifa Karadis,Kalifa Rami,Drake Burner,Drake Clasher,Drake Fighter,Drake Glider,Saurian Augur,Saurian Skirmisher,Drake Warrior,Fire Drake,Drake Flare,Drake Gladiator,Drake Slasher,Saurian Soothsayer,Saurian Oracle,Sky Drake,Saurian Ambusher,Drake Blademaster,Inferno Drake,Drake Flameheart,Drake Enforcer,Drake Warden,Hurricane Drake,Saurian Flanker
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=Dark Elf Enchantress,Dark Elf Fighter,Dark Elf Hunter,Dark Elf Lizard Rider,Dark Elf Noble,Dark Elf  Wizard,Ice Wyrm,Troll Rocklobber,Shadow
    [/disallow_recruit]
    [disallow_recruit]
        side=7
        type=Chaos Headhunter,Chaos Hound,Chaos Invader,Chaos Invoker,Lesser Daemon,Lesser Mutation
    [/disallow_recruit]
    [disallow_recruit]
        side=6
        type=Steppe Herder,Steppe Hunter,Steppe Spearhead,Steppe Warrior,Naga Guardian
    [/disallow_recruit]
#enddef

#define SURVIVALX_FIRST_ARMY_BUF
    [allow_recruit]
        side=9
        type=Drake Warrior,Fire Drake,Drake Flare,Drake Gladiator,Drake Slasher,Saurian Soothsayer,Saurian Oracle,Sky Drake,Saurian Ambusher
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Revenant,Death Blade,Wraith,Shadow,Necrophage,Soulless,Blood Bat,Bone Shooter,Dark Sorcerer,Orcish Warrior,Orcish Crossbowman,Orcish Slayer,Troll,Troll Rocklobber,Goblin Knight,Goblin Pillager
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=Elvish Captain,Elvish Hero,Elvish Ranger,Elvish Marksman,Elvish Rider,Elvish Druid,Elvish Sorceress,Elder Wose,Red Mage,White Mage
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Dwarvish Steelclad,Dwarvish Stalwart,Dwarvish Thunderguard,Dwarvish Berserker,Gryphon Master,Duelist,Rogue,Bandit,Trapper,Outlaw
    [/allow_recruit]
#enddef

#define SURVIVALX_SECOND_ARMY_BUF
    [allow_recruit]
        side=9
        type=Drake Blademaster,Inferno Drake,Drake Flameheart,Drake Enforcer,Drake Warden,Hurricane Drake,Saurian Flanker
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Draug,Banebow,Lich,Necromancer,Nightgaunt,Spectre,Orcish Warlord,Orcish Slurbow,Troll Warrior,Direwolf Rider
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=Elvish Marhsal,Elvish Champion,Elvish Avenger,Elvish Sharpshooter,Elvish Outrider,Elvish Shyde,Elvish Enchantress,Ancient Wose,Mage of Light,Arch Mage,Silver Mage,Grand Mage
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Dwarvish Lord,Dwarvish Sentinel,Dwarvish Dragonguard,Master at Arms,Assassin,Fugitive,Huntsman,Ranger,Highwayman
    [/allow_recruit]
#enddef

#define SURVIVALX_THIRD_ARMY_BUF
    [disallow_recruit]
        side=9
        type=Drake Burner,Drake Clasher,Drake Fighter,Drake Glider,Saurian Augur,Saurian Skirmisher,Wose,Elvish Archer,Elvish Scout
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=Dark Adept,Ghost,Ghoul,Skeleton,Skeleton Archer,Vampire Bat,Orcish Grunt,Orcish Archer,Troll Whelp
    [/disallow_recruit]
    [disallow_recruit]
        side=7
        type=Elvish Fighter,Elvish Archer,Elvish Scout,Elvish Shaman,Wose,Mage,Orcish Archer,Bowman,Spearman
    [/disallow_recruit]
    [disallow_recruit]
        side=6
        type=Dwarvish Fighter,Dwarvish Guardsman,Dwarvish Thunderer,Dwarvish Ulfserker,Footpad,Gryphon Rider,Poacher,Thief,Fencer
    [/disallow_recruit]
#enddef

#define SURVIVALX_FOURTH_ARMY_BUF
    [disallow_recruit]
        side=9
        type=Revenant,Wraith,Shadow,Bone Shooter,Dark Sorcerer
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=Orcish Warrior,Orcish Crossbowman,Troll,Goblin Knight
    [/disallow_recruit]
#enddef

#define SURVIVALX_FIRST_ARMY_BFF
    [allow_recruit]
        side=9
        type=EOM_Blood Manipulator,EOM_Flesh Artisan,EOM_Duelist,EOM_Noble,EOM_Half Blood,EOM_Marlgoyle
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=EOM_Therian Falcon,EOM_Jaguar Therian,EOM_Sea Snake,EOM_Cobra,EOM_Therian Mage,EOM_Therian Shaman,EOM_Therian Defender,EOM_Aura Monk
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=EOM_Dahund,EOM_Black Hunter,EOM_Fire Sprite2,EOM_Changeling,EOM_Shadow Pelt,EOM_Warrior Warg,EOM_Rabid Wolf,EOM_Dire Wolf
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Windsong_Reaver,Windsong_Emissary,Windsong_Lorekeeper,Windsong_Heretic,Windsong_Savant,Windsong_Pathfinder,Windsong_Skyrunner,Windsong_Sky_Crystal,Windsong_Envoy,Windsong_Prophet
    [/allow_recruit]
#enddef

#define SURVIVALX_SECOND_ARMY_BFF
    [allow_recruit]
        side=9
        type=EOM_Sangel,EOM_Sword Dancer,EOM_Sire,EOM_Methusalem,EOM_Day Hunter,EOM_Twilight Walker
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=EOM_Peregrine Falcon,EOM_Panther,EOM_Tiger,EOM_King Cobra,EOM_Spitting Cobra,EOM_Therian Master,EOM_Therian Priest,EOM_Aura Master
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=EOM_Fire Sprite3,EOM_Wolfling,EOM_Night Eye,EOM_Fenrir,EOM_Pack Leader,EOM_Moon Blade,EOM_Garou
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Windsong_Dreadnought,Windsong_Harbinger,Windsong_Oathkeeper,Windsong_Arbiter,Windsong_Runeforger,Windsong_Librarian,Windsong_Farstrider,Windsong_Stormbringer,Windsong_Ascendant
    [/allow_recruit]
#enddef

#define SURVIVALX_THIRD_ARMY_BFF
    [disallow_recruit]
        side=9
        type=EOM_Blood Apprentice,EOM_Fledgeling,EOM_Thin Blood,EOM_Gargoyle,EOM_Blood Hulk,EOM_Malborn
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=EOM_Falcon Therian,EOM_Leopard Therian,EOM_Therian Apprentice,EOM_Serpent Therian,EOM_Therian Guard,EOM_Therian Monk
    [/disallow_recruit]
    [disallow_recruit]
        side=7
        type=EOM_Blackfur,EOM_Fire Sprite,EOM_Shapeshifter,EOM_Dahund young,EOM_Stalker,EOM_Warrior_Wolf,EOM_Wolf Cub
    [/disallow_recruit]
    [disallow_recruit]
        side=6
        type=Windsong Courier,Windsong Gatekeeper,Windsong Scribe,Windsong Seeker,Windsong Sky Shard,Windsong Weaver
    [/disallow_recruit]
#enddef

#define SURVIVALX_FIRST_ARY_BUFF
    [allow_recruit]
        side=9
        type=Revenant,Death Blade,Wraith,Shadow,Necrophage,Soulless,Blood Bat,Bone Shooter,Dark Sorcerer
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Orcish Warrior,Orcish Crossbowman,Orcish Slayer,Troll,Troll Rocklobber,Goblin Knight,Goblin Pillager,Dwarvish Steelclad,Elvish Marksman
    [/allow_recruit]
    [allow_recruit]
        side=7
        type= Dwarvish Steelclad,Dwarvish Stalwart,Dwarvish Thunderguard,Dwarvish Berserker,Gryphon Master,Duelist,Rogue,Bandit,Trapper,Outlaw
    [/allow_recruit]
    [allow_recruit]
        side=6
        type= Drake Warrior,Fire Drake,Drake Flare,Drake Gladiator,Drake Slasher,Saurian Soothsayer,Saurian Oracle,Sky Drake,Saurian Ambusher
    [/allow_recruit]
#enddef

#define SURVIVALX_SECOND_ARY_BUFF
    [allow_recruit]
        side=9
        type=Draug,Banebow,Lich,Necromancer,Nightgaunt,Spectre
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Orcish Warlord,Orcish Slurbow,Troll Warrior,Direwolf Rider,Dwarvish Lord,Elvish Sharpshooter
    [/allow_recruit]
    [allow_recruit]
        side=7
        type= Dwarvish Lord,Dwarvish Sentinel,Dwarvish Dragonguard,Master at Arms,Assassin,Fugitive,Huntsman,Ranger,Highwayman
    [/allow_recruit]
    [allow_recruit]
        side=6
        type= Drake Blademaster,Inferno Drake,Drake Flameheart,Drake Enforcer,Drake Warden,Hurricane Drake,Saurian Flanker
    [/allow_recruit]
#enddef

#define SURVIVALX_THIRD_ARY_BUFF
    [disallow_recruit]
        side=9
        type=Skeleton,Skeleton Archer,Ghoul,Ghost,Dark Adept,Walking Corpse,Vampire Bat
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=Orcish Grunt,Orcish Archer,Orcish Assassin,Wolf Rider,Troll Whelp,Goblin Spearman,Goblin Rouser,Goblin Impaler
    [/disallow_recruit]
    [disallow_recruit]
        side=6
        type=Drake Burner,Drake Clasher,Drake Fighter,Drake Glider,Saurian Augur,Saurian Skirmisher,Wose,Elvish Archer,Elvish Scout
    [/disallow_recruit]
#enddef

#define SURVIVALX_FIRST_ARMY_BUFF
    [allow_recruit]
        side=9
        type=Swordsman,Pikeman,Javelineer,Longbowman,Duelist,Shock Trooper,White Mage,Red Mage,Dragoon,Knight,Lancer
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Dwarvish Thunderguard,Dwarvish Steelclad,Dwarvish Stalwart,Dwarvish Berserker,Gryphon Master,Outlaw,Trapper,Bandit,Rogue,Duelist
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=Elder Wose,Elvish Marksman,Elvish Rider,Elvish Hero,Elvish Captain,Elvish Druid,Elvish Sorceress,Elvish Ranger,White Mage,Red Mage
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Revenant,Death Blade,Wraith,Shadow,Necrophage,Soulless,Blood Bat,Bone Shooter,Dark Sorcerer
    [/allow_recruit]
#enddef

#define SURVIVALX_SECOND_ARMY_BUFF
    [allow_recruit]
        side=9
        type=Royal Guard,Halberdier,Master Bowman,Master at Arms,Iron Mauler,Mage of Light,Arch Mage,Cavalier,Grand Knight,Paladin,Silver Mage
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Dwarvish Lord,Dwarvish Sentinel,Dwarvish Dragonguard,Assassin,Master at Arms
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=Elvish Champion,Elvish Shyde,Elvish Marshal,Elvish Enchantress,Elvish Sharpshooter,Ancient Wose,Elvish Avenger,Elvish Outrider
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Draug,Banebow,Lich,Necromancer,Nightgaunt,Spectre
    [/allow_recruit]
#enddef

#define SURVIVALX_THIRD_ARMY_BUFF
    [disallow_recruit]
        side=9
        type=Sergeant,Spearman,Bowman,Fencer,Cavalryman,Horseman,Mage,Heavy Infantryman,Elvish Archer,Elvish Scout,Drake Burner,Drake Clasher,Drake Fighter,Drake Glider,Saurian Augur,Saurian Skirmisher,Drake Warrior,Fire Drake,Drake Flare,Drake Gladiator,Drake Slasher,Saurian Soothsayer,Saurian Oracle,Sky Drake,Saurian Ambusher,Drake Blademaster,Inferno Drake,Drake Flameheart,Drake Enforcer,Drake Warden,Hurricane Drake,Saurian Flanker
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=Dwarvish Fighter,Dwarvish Guardsman,Dwarvish Thunderer,Dwarvish Ulfserker,Footpad,Gryphon Rider,Poacher,Thief,Fencer
    [/disallow_recruit]
    [disallow_recruit]
        side=7
        type=Elvish Fighter,Elvish Archer,Elvish Scout,Elvish Shaman,Wose,Mage,Orcish Archer,Bowman,Spearman
    [/disallow_recruit]
#enddef

#define SURVIVALX_FOURTH_ARMY_BUFF
    [disallow_recruit]
        side=9
        type=Swordsman,Pikeman,Javelineer,Longbowman,Duelist,Shock Trooper,White Mage,Red Mage,Dragoon,Knight,Lancer
    [/disallow_recruit]
    [disallow_recruit]
        side=6
        type=Dark Adept,Ghost,Ghoul,Skeleton,Skeleton Archer,Vampire Bat,Orcish Grunt,Orcish Archer,Troll Whelp,Revenant,Death Blade,Wraith,Shadow,Necrophage,Soulless,Blood Bat,Bone Shooter,Dark Sorcerer
    [/disallow_recruit]
    [allow_recruit]
        side=6
        type=Ancient Lich,SX_Yeti,Great Mage,Grand Marshal,Elvish Sylph
    [/allow_recruit]
#enddef

#define SURVIVALX_FIRST_ARMY_UFF
    [allow_recruit]
        side=9
        type=orathe,oramast,oracler,oramagu,oranec,oraevil,oragur,orapro,orawar,orapsy,oragrav,orascrp,oracon,oraocc
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=hihat,hiwood,hilog,histon,hibar,hisob,himed,hiamp,hihulk,hikyrw,hibarb,hipilf,hivike,hibag,hival
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=Avhawk,Avbomb,Avlord,Avterr,Avdive,Avdare,Avprc,Avcrow,Avowl,Aviron,Avfloat,Avsit,Avegg,Avdove,Avspar,Avhum,Avgrd,Avbld,Avsave
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Slavseer,Slavsub,Slavpuns,Slavtrance,Slavcourt,Slavpurs,Slavretr,Slaveatr,Slavprov,Slavmine,Slavfarm,Slavtrail,Slavgath
    [/allow_recruit]
#enddef

#define SURVIVALX_SECOND_ARMY_UFF
    [allow_recruit]
        side=9
        type=orajud,orabis,oraque,oraenl,oraseer,orasor,oraomn,oratel,oraalc
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=higame,hithro,hirock,hitap,hicold,hiwild,hibehe,hithor,hiodin,hikyrp,hiplun,Hiland,hiwar
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=Avflur,Aveagle,Avdread,Avbaron,Avrock,Avraven,Avnight,Avsteel,Avdime,Avpass,Avfalc,Avshl,Avrzr
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=Slavmast,Slavchase,Slavabu,Slavfree,Slavshat,Slavstalk
    [/allow_recruit]
#enddef

#define SURVIVALX_THIRD_ARMY_UFF
    [disallow_recruit]
        side=9
        type=oraarb,orablnd,oracle,orahold,oramon,oraora,orawiz,oramag,oradar,orasag,oramagn,orasum,orasci
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=hiaxe,hicont,hidrun,hifield,higia,hikyr,hinord,hipipe,hisprt
    [/disallow_recruit]
    [disallow_recruit]
        side=7
        type=Avarch,Avbroad,Avdart,Avdaw,Avgrnd,Avmoth,Avpig,Avwatch
    [/disallow_recruit]
    [disallow_recruit]
        side=6
        type=Slavhold,Slavtrack,Slavmutt,Slavprod,Slavserf,Slavwork,Slavmnt,Slavdanc,Slavhar
    [/disallow_recruit]
#enddef

#define SURVIVALX_FIRST_RMY_BUFF
    [allow_recruit]
        side=9
        type=ifhound,iftrog,ifdemon,ifarchf,ifsadist,ifmagog,ififrema,iffamil,ifpitl,iftorm,ifessen
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=fanwar,fanmart,fanterr,fanambu,fanride,fancarp2,fanmind,fandevo,fanmaster,fanmisin,fanthief,fanprowl
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=empmush,empcapn,empwar,empass,empshu,emptat,empbush,empmon,empkyu,empshow
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=hivsolda,hivfire,hivstag,hivflea,hivprin,hivwasp,hivlant,hivskip,hivmant,hivsold,hivtaran,hivtrap,hivinf
    [/allow_recruit]
#enddef

#define SURVIVALX_SECOND_RMY_BUFF
    [allow_recruit]
        side=9
        type=ifcerb,ifintrog,ifblodb,ifdevil,ifhornd,iflucifer,ifincub,ififresu,ifpitm
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=fanzeal,fanfear,fanskulk,fanknght,fanfana,fanprop,fanband
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=empblk,empsho,empdai,empshad,empshin,empshur,empryo,emptsuw,empgrd,empdemon,empekyu
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=hivbull,hivherc,hivtick,hivhorn,hivregal,hivglide,hivgarga,hivdrove
    [/allow_recruit]
#enddef

#define SURVIVALX_THIRD_RMY_BUFF
    [disallow_recruit]
        side=9
        type=ifdog,ifdwell,iffiend,ifgog,ififreet,ifscamp,ifpit,ifsoul
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=fanblad,fanbow,fancara,fancarp,fanfoll,fangenie,fangoss,fanrat
    [/disallow_recruit]
    [disallow_recruit]
        side=7
        type=empmar,empmnt,empnin,empozu,empryu,empsam,empthro,empyu
    [/disallow_recruit]
    [disallow_recruit]
        side=6
        type=hivant,hivbeet,hivdrone,hivfifly,hivfly,hivmosq,hivhop,hivspid,hivmite,hivswarm
    [/disallow_recruit]
#enddef

#define SURVIVALX_FIRST_AMY_BUFF
    [allow_recruit]
        side=9
        type=cucov,cuove,cubani,culone,cumisc,cusent,cureb,cutran,cuout,cuslid,culurk,cuabus,culurk
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Mercmank,Merches,Mercgrd,Mercboun,Mercscav,Merctrac,Mercwarmage,Mercisomage,Mercslsh,Merccut,Mercseek,Mercmanu,Mercpire,Mercsea
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=refpure,refmess,refarson,refgate,refwall,refmace,refhop,refdef,refjave,refsnipe
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=equmust,equbull,equcrsh,equchmp,equpal,equblk,equmak,equtro,equpegk,equequ,equman,equno
    [/allow_recruit]
#enddef

#define SURVIVALX_SECOND_AMY_BUFF
    [allow_recruit]
        side=9
        type=cuexe,cuspy,cuclea,cucond,cumons,cubeac,cusubv,cumut,cuinhu,curemn,cuprim,cuslit,cuwayl
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=Mercslay,Mercsof,Mercmaa,Mercpro,Mercsnip,Merccol,Mercbtlmage,Mercisomage,Merchit,Mercque,Mercgeu,Mercsair,Merccapn,Mercmari
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=refeye,refenvoy,refgreet,refspire,refclear,refpro,refpha,refline
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=equbrck,equtemp,equsilv,equjock,equroa
    [/allow_recruit]
#enddef

#define SURVIVALX_THIRD_AMY_BUFF
    [disallow_recruit]
        side=9
        type=cucult,cuexil,cufrea,culook,cuwait,curecr,cuswim,cusurv
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=Merc,Merchunt,Mercbru,Mercpick,Mercnegmage,Mercrid,Mercsail
    [/disallow_recruit]
    [disallow_recruit]
        side=7
        type=refsari,refsent,refgard,refclean,refcour,reffocul,refrabl
    [/disallow_recruit]
    [disallow_recruit]
        side=6
        type=equbron,equchrg,equkngt,equmar,equpeg,equrid,equsea,equvag
    [/disallow_recruit]
#enddef

#define SURVIVALX_FIRST_ARMY_BU
    [allow_recruit]
        side=9
        type=Enchimpa,Enchintea,Enchinteb,Enchars,Enchhand,Enchsac,Enchforg,Enchfeat,Enchblaz,Enchclear,Enchmgc,Enchposs,Enchshift
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=triarch,trieat,trihunt,tridecap,trimed,triwitch,triroo,tritrib,triende
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=hocrus,hobish,hoprst,hoinqu,hojudm,holist,hojust,homage,hoscho,hosprt,hotwlt,hodems
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=bliooze,blizomb,blimutil,blicreep,bliunder,bliranc,blidism,blihive,bliplag
    [/allow_recruit]
#enddef

#define SURVIVALX_SECOND_ARMY_BU
    [allow_recruit]
        side=9
        type=Enchsplca,Enchimpb,Enchmage,Enchsplcb,Enchimpc,Enchmast,Enchstoc,Enchdev,Enchsell,Enchmad,Enchapoc,Enchfab,Enchtitn,Enchinc,Enchcryst,Enchensw,Enchshdw,Enchex
    [/allow_recruit]
    [allow_recruit]
        side=8
        type=trinati,trislay,triexec,trivoodoo,tribox,trichief,triindi
    [/allow_recruit]
    [allow_recruit]
        side=7
        type=hopala,hoabsh,hopope,hotort,hosjud,hoeyef,holaw,hoord,hopck,hoball,howise,hoarcs,hopurf
    [/allow_recruit]
    [allow_recruit]
        side=6
        type=bliflesh,blidread,bliputr,blibli
    [/allow_recruit]
#enddef

#define SURVIVALX_THIRD_ARMY_BU
    [disallow_recruit]
        side=9
        type=Enchappr,Encharm,Enchcurse,Enchench,Enchshot,Enchredu,Enchswrd
    [/disallow_recruit]
    [disallow_recruit]
        side=8
        type=tribow,tricook,tridart,triscalp,trisham,triwally,triwar
    [/disallow_recruit]
    [disallow_recruit]
        side=7
        type=hoaggr,hocler,hointer,hojudg,homntd,hooffc,hostud,howisp,howith
    [/disallow_recruit]
    [disallow_recruit]
        side=6
        type=blislime,bliacid,blicada,blichar,blicrawl,blicurr,blifetid,blihost,bliinfes,blileech,blivirus
    [/disallow_recruit]
#enddef

#--------------------------------------------------------------
# This macro sets a given side's remaining armor upgrades to 10.
# Must be used inside an event-tag.
# Usage: SIDE is the side you want to set the upgrades of.
#--------------------------------------------------------------
#define SURVIVALX_ARMORY_LIMIT SIDE
    {VARIABLE armors_left_{SIDE} 10}
    {VARIABLE resistance_bought_blade_{SIDE} 0}
    {VARIABLE resistance_bought_pierce_{SIDE} 0}
    {VARIABLE resistance_bought_impact_{SIDE} 0}
    {VARIABLE resistance_bought_fire_{SIDE} 0}
    {VARIABLE resistance_bought_cold_{SIDE} 0}
    {VARIABLE resistance_bought_arcane_{SIDE} 0}
    {VARIABLE terrains_lefty_{SIDE} 3}
    {VARIABLE move_lefty_{SIDE} 25}
    {VARIABLE move_bought_shallow_{SIDE} 0}
    {VARIABLE move_bought_swamp_{SIDE} 0}
    {VARIABLE move_bought_grass_{SIDE} 0}
    {VARIABLE move_bought_sand_{SIDE} 0}
    {VARIABLE move_bought_forest_{SIDE} 0}
    {VARIABLE move_bought_hills_{SIDE} 0}
    {VARIABLE move_bought_mountain_{SIDE} 0}
    {VARIABLE move_bought_castle_{SIDE} 0}
    {VARIABLE move_bought_cave_{SIDE} 0}
    {VARIABLE move_bought_tundra_{SIDE} 0}
    {VARIABLE move_bought_fungus_{SIDE} 0}
#enddef

#--------------------------------------------------------------
# This macro sets an empty player slot's gold to 0, no matter
# how much it had before. Must be used inside an event-tag.
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#--------------------------------------------------------------
#define SURVIVALX_NO_GOLD_FOR_NOBODY
    [store_gold]
        side=1
        variable=gold_trans_1
    [/store_gold]
    [store_gold]
        side=2
        variable=gold_trans_2
    [/store_gold]
    [store_gold]
        side=3
        variable=gold_trans_3
    [/store_gold]
    [store_gold]
        side=4
        variable=gold_trans_4
    [/store_gold]
    [store_gold]
        side=5
        variable=gold_trans_5
    [/store_gold]
    [if]
        [not]
            [have_unit]
                side=1
                canrecruit=yes
            [/have_unit]
        [/not]
        [then]
            [gold]
                amount=-$gold_trans_1
                side=1
            [/gold]
        [/then]
    [/if]
    [if]
        [not]
            [have_unit]
                side=2
                canrecruit=yes
            [/have_unit]
        [/not]
        [then]
            [gold]
                amount=-$gold_trans_2
                side=2
            [/gold]
        [/then]
    [/if]
    [if]
        [not]
            [have_unit]
                side=3
                canrecruit=yes
            [/have_unit]
        [/not]
        [then]
            [gold]
                amount=-$gold_trans_3
                side=3
            [/gold]
        [/then]
    [/if]
    [if]
        [not]
            [have_unit]
                side=4
                canrecruit=yes
            [/have_unit]
        [/not]
        [then]
            [gold]
                amount=-$gold_trans_4
                side=4
            [/gold]
        [/then]
    [/if]
    [if]
        [not]
            [have_unit]
                side=5
                canrecruit=yes
            [/have_unit]
        [/not]
        [then]
            [gold]
                amount=-$gold_trans_5
                side=5
            [/gold]
        [/then]
    [/if]
#enddef

#--------------------------------------------------------------
# This macro gives the enemies a last, final buff. Activiates
# too lately though.
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#--------------------------------------------------------------
#define SURVIVALX_MEGA_CHALLENGE
    [event]
        name=turn 125
        [gold]
            side=6
            amount=1000
        [/gold]
        [gold]
            side=7
            amount=1000
        [/gold]
        [gold]
            side=8
            amount=1000
        [/gold]
        [gold]
            side=9
            amount=1000
        [/gold]
    [/event]
#enddef

#--------------------------------------------------------------
# This macro gives the players a bonus income if they manage to
# keep certain enemy leaders dead. This bonus is taken away
# again as soon as new creep leaders spawn.
# Usage: B6,B7,B8,B9 is the bonus income the players get if the
#        creep leader of the B-side is dead.
#--------------------------------------------------------------
#define SURVIVALX_INCOME_BONUS B6 B7 B8 B9
    [event]
        name=new turn
        first_time_only=no
        {VARIABLE income_bonus 0}
        [if]
            [not]
                [have_unit]
                    side=6
                    canrecruit=yes
                [/have_unit]
            [/not]
            [then]
                {VARIABLE_OP income_bonus add "{B6}"}
            [/then]
        [/if]
        [if]
            [not]
                [have_unit]
                    side=7
                    canrecruit=yes
                [/have_unit]
            [/not]
            [then]
                {VARIABLE_OP income_bonus add "{B7}"}
            [/then]
        [/if]
        [if]
            [not]
                [have_unit]
                    side=8
                    canrecruit=yes
                [/have_unit]
            [/not]
            [then]
                {VARIABLE_OP income_bonus add "{B8}"}
            [/then]
        [/if]
        [if]
            [not]
                [have_unit]
                    side=9
                    canrecruit=yes
                [/have_unit]
            [/not]
            [then]
                {VARIABLE_OP income_bonus add "{B9}"}
            [/then]
        [/if]
        [if]
            [variable]
                name=difficulty
                greater_than_equal_to=175
            [/variable]
            [then]
                {VARIABLE_OP income_bonus multiply 0.4}
            [/then]
            [else]
                [if]
                    [variable]
                        name=difficulty
                        greater_than_equal_to=150
                    [/variable]
                    [then]
                        {VARIABLE_OP income_bonus multiply 0.6}
                    [/then]
                    [else]
                        [if]
                            [variable]
                                name=difficulty
                                greater_than_equal_to=125
                            [/variable]
                            [then]
                                {VARIABLE_OP income_bonus multiply 0.8}
                            [/then]
                            [else]
                                [if]
                                    [variable]
                                        name=difficulty
                                        greater_than_equal_to=100
                                    [/variable]
                                    [then]
                                        {VARIABLE_OP income_bonus multiply 1.0}
                                    [/then]
                                    [else]
                                        [if]
                                            [variable]
                                                name=difficulty
                                                greater_than_equal_to=75
                                            [/variable]
                                            [then]
                                                {VARIABLE_OP income_bonus multiply 1.2}
                                            [/then]
                                            [else]
                                                [if]
                                                    [variable]
                                                        name=difficulty
                                                        greater_than_equal_to=50
                                                    [/variable]
                                                    [then]
                                                        {VARIABLE_OP income_bonus multiply 1.4}
                                                    [/then]
                                                [/if]
                                            [/else]
                                        [/if]
                                    [/else]
                                [/if]
                            [/else]
                        [/if]
                    [/else]
                [/if]
            [/else]
        [/if]
        [if]
            [have_unit]
                side=1
                canrecruit=yes
            [/have_unit]
            [variable]
                name=income_bonus
                greater_than_equal_to=1
            [/variable]
            [then]
                [gold]
                    side=1
                    amount=$income_bonus
                [/gold]
                [store_unit]
                    [filter]
                        side=1
                        canrecruit=yes
                    [/filter]
                    variable=income_leader_1
                [/store_unit]
                [unstore_unit]
                    variable=income_leader_1
                    text=$income_bonus
                    red,green,blue=255,255,0
                [/unstore_unit]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=2
                canrecruit=yes
            [/have_unit]
            [variable]
                name=income_bonus
                greater_than_equal_to=1
            [/variable]
            [then]
                [gold]
                    side=2
                    amount=$income_bonus
                [/gold]
                [store_unit]
                    [filter]
                        side=2
                        canrecruit=yes
                    [/filter]
                    variable=income_leader_2
                [/store_unit]
                [unstore_unit]
                    variable=income_leader_2
                    text=$income_bonus
                    red,green,blue=255,255,0
                [/unstore_unit]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=3
                canrecruit=yes
            [/have_unit]
            [variable]
                name=income_bonus
                greater_than_equal_to=1
            [/variable]
            [then]
                [gold]
                    side=3
                    amount=$income_bonus
                [/gold]
                [store_unit]
                    [filter]
                        side=3
                        canrecruit=yes
                    [/filter]
                    variable=income_leader_3
                [/store_unit]
                [unstore_unit]
                    variable=income_leader_3
                    text=$income_bonus
                    red,green,blue=255,255,0
                [/unstore_unit]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=4
                canrecruit=yes
            [/have_unit]
            [variable]
                name=income_bonus
                greater_than_equal_to=1
            [/variable]
            [then]
                [gold]
                    side=4
                    amount=$income_bonus
                [/gold]
                [store_unit]
                    [filter]
                        side=4
                        canrecruit=yes
                    [/filter]
                    variable=income_leader_4
                [/store_unit]
                [unstore_unit]
                    variable=income_leader_4
                    text=$income_bonus
                    red,green,blue=255,255,0
                [/unstore_unit]
            [/then]
        [/if]
        [if]
            [have_unit]
                side=5
                canrecruit=yes
            [/have_unit]
            [variable]
                name=income_bonus
                greater_than_equal_to=1
            [/variable]
            [then]
                [gold]
                    side=5
                    amount=$income_bonus
                [/gold]
                [store_unit]
                    [filter]
                        side=5
                        canrecruit=yes
                    [/filter]
                    variable=income_leader_5
                [/store_unit]
                [unstore_unit]
                    variable=income_leader_5
                    text=$income_bonus
                    red,green,blue=255,255,0
                [/unstore_unit]
            [/then]
        [/if]
        {CLEAR_VARIABLE income_bonus}
        {CLEAR_VARIABLE income_leader_1}
        {CLEAR_VARIABLE income_leader_2}
        {CLEAR_VARIABLE income_leader_3}
        {CLEAR_VARIABLE income_leader_4}
        {CLEAR_VARIABLE income_leader_5}
    [/event]
#enddef

#--------------------------------------------------------------
# This is just a little hack for me so I don't have to change
# around all version numbers in all scenarios whenever it goes
# up. Can only be used in a message (or something that shows
# a text).
# Usage: Just use it! You don't have to give any further
#        information for this to work.
#--------------------------------------------------------------
#define SURVIVALX_VERSION
    Version 2.06
#enddef
